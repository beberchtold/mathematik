function init(){canvas1=document.getElementById("myCanvas"),ctx=canvas1.getContext("2d"),canvas1.addEventListener("click",function(e){var r=getMousePos(canvas1,e),t=r.x,n=r.y,a=Math.floor(t/sw)+1,o=Math.floor(n/sh)+1,d=board[o-1][a-1];if(d>3&&12>d){if(document.getElementById("links").checked)return move_left(a,o),document.getElementById("Zug-").disabled=!1,void 0;if(document.getElementById("rechts").checked)return move_right(a,o),document.getElementById("Zug-").disabled=!1,void 0;if(document.getElementById("oben").checked)return move_up(a,o),document.getElementById("Zug-").disabled=!1,void 0;document.getElementById("unten").checked&&(move_down(a,o),document.getElementById("Zug-").disabled=!1)}},!1),doClear()}function OnChangeCheckbox1(e){e.checked&&(document.getElementById("rechts").checked=!1,document.getElementById("oben").checked=!1,document.getElementById("unten").checked=!1)}function OnChangeCheckbox2(e){e.checked&&(document.getElementById("links").checked=!1,document.getElementById("oben").checked=!1,document.getElementById("unten").checked=!1)}function OnChangeCheckbox3(e){e.checked&&(document.getElementById("links").checked=!1,document.getElementById("rechts").checked=!1,document.getElementById("unten").checked=!1)}function OnChangeCheckbox4(e){e.checked&&(document.getElementById("links").checked=!1,document.getElementById("rechts").checked=!1,document.getElementById("oben").checked=!1)}function doClear(){for(var e=0;12>e;e++)for(var r=0;12>r;r++)board[e][r]=-1;for(e=1;11>e;e++)for(r=1;11>r;r++)board[e][r]=0;for(board[1][1]=-1,board[1][10]=-1,board[10][1]=-1,board[10][10]=-1,board[2][2]=-1,board[2][9]=-1,board[9][2]=-1,board[9][9]=-1,board[2][1]=4,board[1][5]=9,board[3][7]=1,board[4][4]=10,board[4][8]=11,board[5][4]=2,board[5][6]=5,board[6][2]=2,board[6][8]=1,board[7][6]=3,board[8][2]=7,board[8][3]=6,board[8][9]=8,e=0;8>e;e++)farbe[e]="blue";farbe[3]="red",farbe[4]="red",zugnr=0,message.innerHTML="    Viel GlÃ¼ck!",document.getElementById("Zug-").disabled=!0,zeichne()}function zeichne(){ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1";for(var e=0;13>e;e++){var r=e*sw;ctx.moveTo(r,0),ctx.lineTo(r,H)}for(e=0;13>e;e++){var t=e*sh;ctx.moveTo(0,t),ctx.lineTo(W,t)}for(ctx.stroke(),ctx.closePath(),e=1;13>e;e++){r=(e-1)*sw;for(var n=1;13>n;n++){t=(n-1)*sh;var a=board[n-1][e-1];ctx.beginPath(),-1==a&&(ctx.fillStyle="gray"),0==a&&(ctx.fillStyle="white"),1==a&&(ctx.fillStyle="red"),2==a&&(ctx.fillStyle="yellow"),3==a&&(ctx.fillStyle="blue"),ctx.rect(r+1,t+1,sw-1,sh-1),ctx.fill(),a>3&&12>a&&putSquare(a,e,n,farbe[a-4]),ctx.closePath()}}}function putSquare(e,r,t,n){var a=(r-1)*sw,o=(t-1)*sh;ctx.beginPath(),ctx.fillStyle="white",ctx.rect(a+1,o+1,sw-1,sh-1),ctx.fill(),ctx.closePath(),ctx.beginPath(),ctx.strokeStyle=n,ctx.rect(a+1,o+1,sw-1,sh-1),ctx.stroke(),ctx.closePath(),ctx.beginPath(),ctx.fillStyle=n,(7==e||8==e)&&(ctx.moveTo(a+3,o+sh-3),ctx.lineTo(a+sw-3,o+sh-3),ctx.lineTo(a+sw/2,o+3),ctx.lineTo(a+3,o+sh-3)),(4==e||5==e||6==e)&&ctx.arc(a+14,o+14,10,0,2*Math.PI),(9==e||10==e||11==e)&&ctx.rect(a+5,o+5,sw-10,sh-10),ctx.fill(),ctx.closePath()}function clearSquare(e,r){var t=(e-1)*sw,n=(r-1)*sh;ctx.beginPath(),ctx.strokeStyle="black",ctx.fillStyle="white",ctx.rect(t+1,n+1,sw-1,sh-1),ctx.fill(),ctx.closePath()}function move_down(e,r){for(nr=board[r-1][e-1],aktnr=nr,starti=e,startj=r,startcolor=farbe[nr-4],endi=e;0==board[r][e-1];)clearSquare(e,r),board[r-1][e-1]=0,putSquare(nr,e,r+1,farbe[nr-4]),board[r][e-1]=nr,r++;endj=r,1==board[r][e-1]&&(putSquare(nr,e,r,"red"),farbe[nr-4]="red"),2==board[r][e-1]&&(putSquare(nr,e,r,"yellow"),farbe[nr-4]="yellow"),3==board[r][e-1]&&(putSquare(nr,e,r,"blue"),farbe[nr-4]="blue"),ende()}function move_up(e,r){for(nr=board[r-1][e-1],aktnr=nr,starti=e,startj=r,startcolor=farbe[nr-4],endi=e;0==board[r-2][e-1];)clearSquare(e,r),board[r-1][e-1]=0,putSquare(nr,e,r-1,farbe[nr-4]),board[r-2][e-1]=nr,r--;endj=r,1==board[r-2][e-1]&&(putSquare(nr,e,r,"red"),farbe[nr-4]="red"),2==board[r-2][e-1]&&(putSquare(nr,e,r,"yellow"),farbe[nr-4]="yellow"),3==board[r-2][e-1]&&(putSquare(nr,e,r,"blue"),farbe[nr-4]="blue"),ende()}function move_right(e,r){for(nr=board[r-1][e-1],aktnr=nr,starti=e,startj=r,startcolor=farbe[nr-4],endj=r;0==board[r-1][e];)clearSquare(e,r),board[r-1][e-1]=0,putSquare(nr,e+1,r,farbe[nr-4]),board[r-1][e]=nr,e++;endi=e,1==board[r-1][e]&&(putSquare(nr,e,r,"red"),farbe[nr-4]="red"),2==board[r-1][e]&&(putSquare(nr,e,r,"yellow"),farbe[nr-4]="yellow"),3==board[r-1][e]&&(putSquare(nr,e,r,"blue"),farbe[nr-4]="blue"),ende()}function move_left(e,r){for(nr=board[r-1][e-1],aktnr=nr,starti=e,startj=r,startcolor=farbe[nr-4],endj=r;0==board[r-1][e-2];)clearSquare(e,r),board[r-1][e-1]=0,putSquare(nr,e-1,r,farbe[nr-4]),board[r-1][e-2]=nr,e--;endi=e,1==board[r-1][e-2]&&(putSquare(nr,e,r,"red"),farbe[nr-4]="red"),2==board[r-1][e-2]&&(putSquare(nr,e,r,"yellow"),farbe[nr-4]="yellow"),3==board[r-1][e-2]&&(putSquare(nr,e,r,"blue"),farbe[nr-4]="blue"),ende()}function back(){document.getElementById("Zug-").disabled=!0,zugnr--,message.innerHTML="Zug "+zugnr,clearSquare(endi,endj),board[endj-1][endi-1]=0,putSquare(aktnr,starti,startj,startcolor),board[startj-1][starti-1]=aktnr,farbe[aktnr-4]=startcolor}function fertig(){for(var e=!0,r=2;10>r;r++)for(var t=2;10>t;t++){e=!0;var n=board[t-1][r-1];if(4>n||n>6?e=!1:"blue"!=farbe[n-4]&&(e=!1),n=board[t-1][r],4>n||n>6?e=!1:"blue"!=farbe[n-4]&&(e=!1),n=board[t-1][r+1],4>n||n>6?e=!1:"blue"!=farbe[n-4]&&(e=!1),n=board[t][r-1],7>n||n>8?e=!1:"red"!=farbe[n-4]&&(e=!1),n=board[t][r],0!=n&&(e=!1),n=board[t][r+1],7>n||n>8?e=!1:"red"!=farbe[n-4]&&(e=!1),n=board[t+1][r-1],9>n||n>11?e=!1:"blue"!=farbe[n-4]&&(e=!1),n=board[t+1][r],9>n||n>11?e=!1:"blue"!=farbe[n-4]&&(e=!1),n=board[t+1][r+1],9>n||n>11?e=!1:"blue"!=farbe[n-4]&&(e=!1),e)return!0}return!1}function ende(){zugnr++,message.innerHTML="Zug "+zugnr,fertig()&&(message.innerHTML="Gratuliere!!")}function getMousePos(e,r){var t=e.getBoundingClientRect();return{x:r.clientX-t.left,y:r.clientY-t.top}}W=336,H=W,sw=W/12,sh=sw;for(var zugnr,starti,startj,endi,endj,aktnr,board=new Array(12),i=0;i<board.length;++i)board[i]=new Array(12);var farbe=new Array(8),canvas1,ctx;window.onload=init;