var W,H;var Xmin=-1.1;var Xmax=7.1;var Ymin=-3.1;var Ymax=3.1;var ctx;var DiffX=Xmax-Xmin;var DiffY=Ymax-Ymin;var a=1;var b=1;var h=0;var k=0;var einheitx,einheity;var mousedown=false;var initmade=false;var sinus=true;window.onload=resizeCanvas;function resizeCanvas(){var c=document.getElementById("containercanvas");c.width=c.offsetWidth;W=c.width;if(W>400){W=400}H=0.75*W;einheitx=W/DiffX;einheity=H/DiffY;if(initmade){resize1();zeichneKS();zeichne_funktion()}else{init()}}function ok1(){Xmin=parseFloat(document.getElementById("Xmin").value);Xmax=parseFloat(document.getElementById("Xmax").value);Ymin=parseFloat(document.getElementById("Ymin").value);Ymax=parseFloat(document.getElementById("Ymax").value);DiffX=Xmax-Xmin;if(DiffX<0){var c=Xmin;Xmin=Xmax;Xmax=c;DiffX=-DiffX}DiffY=Ymax-Ymin;if(DiffY<0){var c=Xmin;Ymin=Ymax;Ymax=c;DiffY=-DiffY}einheitx=W/DiffX;einheity=H/DiffY}function ok2(){a=parseFloat(document.getElementById("a").value);b=parseFloat(document.getElementById("b").value);h=parseFloat(document.getElementById("h").value);k=parseFloat(document.getElementById("k").value)}function f(d,e,c,i,g){if(sinus){return e*Math.sin(c*(d-i*Math.PI))+g}else{return e*Math.cos(c*(d-i*Math.PI))+g}}function init(){initmade=true;window.addEventListener("resize",function(c){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");document.getElementById("ch1").checked=true;document.getElementById("ch5").style.backgroundColor="#00FF00";canvas1.addEventListener("mousedown",function(c){mousedown=true},false);canvas1.addEventListener("mouseup",function(c){mousedown=false},false);canvas1.addEventListener("mousemove",function(e){if(mousedown){var d=getMousePos(canvas1,e);var g=d.x;var c=d.y;diffx=g-col(0);diffy=c-row(0);if(document.getElementById("ch1").checked){a=-diffy/einheity;if(a>Ymax){a=Ymax}if(a<Ymin){a=Ymin}document.getElementById("a").value=round(a)}if(document.getElementById("ch4").checked){k=-diffy/einheity;if(k>Ymax){k=Ymax}if(k<Ymin){k=Ymin}document.getElementById("k").value=round(k)}if(document.getElementById("ch2").checked){b=diffx/einheitx;if(b>Xmax){b=Xmax}if(b<Xmin){b=Xmin}document.getElementById("b").value=round(b)}if(document.getElementById("ch3").checked){h=diffx/einheitx;if(h>Xmax){h=Xmax}if(h<Xmin){h=Xmin}document.getElementById("h").value=round(h)}zeichne1()}},false);zeichne1()}function resize1(){canvas1.width=W;canvas1.height=H}function button5(){sinus=true;document.getElementById("ch6").style.backgroundColor="#E0FFFF";document.getElementById("ch5").style.backgroundColor="#00FF00";zeichne1()}function button6(){sinus=false;document.getElementById("ch5").style.backgroundColor="#E0FFFF";document.getElementById("ch6").style.backgroundColor="#00FF00";zeichne1()}function dostep(){if(document.getElementById("ch1").checked){a=a+0.05*(Math.round(Ymax)-Math.round(Ymin));if(a>Ymax){a=Math.round(Ymin)}document.getElementById("a").value=round(a)}if(document.getElementById("ch2").checked){b=b+0.05*DiffX;if(b>10){b=0.01}document.getElementById("b").value=round(b)}if(document.getElementById("ch3").checked){h=h+0.05*DiffX;if(h>2){h=-2}document.getElementById("h").value=round(h)}if(document.getElementById("ch4").checked){k=k+0.05*DiffY;if(k>Ymax){k=Ymin}document.getElementById("k").value=round(k)}zeichne1()}function startwerte(){a=1;b=1;h=0;k=0;document.getElementById("a").value=a;document.getElementById("b").value=b;document.getElementById("h").value=h;document.getElementById("k").value=k;zeichne1()}function zeichne(){ok1();ok2();zeichneKS();zeichne_funktion()}function zeichne1(){ok2();zeichneKS();zeichne_funktion()}function zeichneKS(){ctx.clearRect(0,0,W,H);ctx.beginPath();ctx.strokeStyle="black";ctx.lineWidth="1";ctx.font="10px Arial";var e=row(0);ctx.moveTo(0,e);ctx.lineTo(W,e);var d=Math.floor(Xmin);var c=Math.floor(Xmax);var i=e;var o=d;if(DiffX<=20){while(o<=c){var j=col(o);ctx.moveTo(j,i+3);ctx.lineTo(j,i-3);ctx.strokeText(o,j-3,i+10);o=o+1}}o=d+5-d%5;if(DiffX>20&&DiffX<80){while(o<=c){var j=col(o);ctx.moveTo(j,i+3);ctx.lineTo(j,i-3);ctx.strokeText(o,j-5,i+10);o=o+5}}ctx.moveTo(W-5,e-5);ctx.lineTo(W,e);ctx.moveTo(W-5,e+5);ctx.lineTo(W,e);var g=col(0);ctx.moveTo(g,0);ctx.lineTo(g,H);var n=Math.floor(Ymin);var m=Math.floor(Ymax);j=g;var l=n;if(DiffY<=20){while(l<=m){if(l==0){l=l+1}i=row(l);ctx.moveTo(j-3,i);ctx.lineTo(j+3,i);ctx.strokeText(l,j-12,i+3);l=l+1}}l=n+5-n%5;if(DiffY>20&&DiffY<80){while(l<=m){if(l==0){l=l+5}i=row(l);ctx.moveTo(j-3,i);ctx.lineTo(j+3,i);ctx.strokeText(l,j-16,i+3);l=l+5}}ctx.moveTo(g-5,5);ctx.lineTo(g,0);ctx.moveTo(g+5,5);ctx.lineTo(g,0);ctx.stroke()}function zeichne_funktion(){ctx.beginPath();ctx.strokeStyle="green";var j=f(Xmin,a,b,h,k);var d=row(j);ctx.moveTo(0,d);for(var g=0;g<W;g++){var c=Xmin+DiffX/W*g;var e=f(c,a,b,h,k);if(Math.abs(e-j)<DiffY/2&&e!=100000){ctx.lineTo(g,row(e))}else{ctx.moveTo(g,row(e))}j=e}ctx.stroke()}function col(c){return((c-Xmin)/DiffX*W)}function row(c){return((Ymax-c)/DiffY*H)}function round(c){return Math.round(100*c)/100}function getMousePos(d,c){var e=d.getBoundingClientRect();return{x:c.clientX-e.left,y:c.clientY-e.top}};