var H;var W;var Ursprungx;var Ursprungy;deltax=40;xmax=10;xmin=-xmax;ymax=10;ymin=-ymax;var x1=1;var y1=3;var x2=-2;var y2=1;var canvas1;var ctx;var zx;var zy;var mode=1;var mousedown=false;var initmade=false;window.onload=resizeCanvas;function resizeCanvas(){var a=document.getElementById("containercanvas");a.width=a.offsetWidth;W=a.width;if(W>400){W=400}H=W;Ursprungx=H/2;Ursprungy=W/2;if(initmade){resize1();zeichne()}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(a){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");document.getElementById("Addition").checked=true;document.getElementById("kartesisch").checked=true;canvas1.addEventListener("mousedown",function(a){mousedown=true},false);canvas1.addEventListener("mouseup",function(a){mousedown=false},false);canvas1.addEventListener("mousemove",function(b){if(mousedown){var a=getMousePos(canvas1,b);var d=invmap(0,a.x);var c=invmap(1,a.y);if(Math.abs(d-x1)+Math.abs(c-y1)<Math.abs(d-x2)+Math.abs(c-y2)){x1=d;y1=c}else{x2=d;y2=c}if(mode==1){doAddition()}if(mode==2){doSubtraktion()}if(mode==3){doMultiplikation()}if(mode==4){doDivision()}}},false);zx=x1+x2;zy=y1+y2;zeichne()}function resize1(){canvas1.width=W;canvas1.height=H}function OnChangeCheckbox1(a){if(a.checked){mode=1;document.getElementById("Subtraktion").checked=false;document.getElementById("Multiplikation").checked=false;document.getElementById("Division").checked=false;doAddition()}}function OnChangeCheckbox2(a){if(a.checked){mode=2;document.getElementById("Addition").checked=false;document.getElementById("Multiplikation").checked=false;document.getElementById("Division").checked=false;doSubtraktion()}}function OnChangeCheckbox3(a){if(a.checked){mode=3;document.getElementById("Addition").checked=false;document.getElementById("Subtraktion").checked=false;document.getElementById("Division").checked=false;doMultiplikation()}}function OnChangeCheckbox4(a){if(a.checked){mode=4;document.getElementById("Addition").checked=false;document.getElementById("Subtraktion").checked=false;document.getElementById("Multiplikation").checked=false;doDivision()}}function OnChangeCheckbox5(a){if(a.checked){document.getElementById("polar").checked=false;zeichne()}}function OnChangeCheckbox6(a){if(a.checked){document.getElementById("kartesisch").checked=false;zeichne()}}function calc(){x1=parseFloat(document.getElementById("x1").value);y1=parseFloat(document.getElementById("y1").value);x2=parseFloat(document.getElementById("x2").value);y2=parseFloat(document.getElementById("y2").value);if(mode==1){doAddition()}if(mode==2){doSubtraktion()}if(mode==3){doMultiplikation()}if(mode==4){doDivision()}}function doAddition(){zx=x1+x2;zy=y1+y2;zeichne()}function doSubtraktion(){zx=x1-x2;zy=y1-y2;zeichne()}function doMultiplikation(){zx=x1*x2-y1*y2;zy=x1*y2+x2*y1;zeichne()}function doDivision(){var a=x2*x2+y2*y2;if(a>0){zx=(x1*x2+y1*y2)/a;zy=(-x1*y2+x2*y1)/a}else{zx=NaN;zy=NaN}zeichne()}function Line(b,d,a,c){ctx.beginPath();ctx.moveTo(map(0,b),map(1,d));ctx.lineWidth="1";ctx.lineTo(map(0,a),map(1,c));ctx.stroke()}function map(a,b){s=2;if(a<0.5){s=(b-xmin)/(xmax-xmin)*W}if(a>0.5){s=(ymax-b)/(ymax-ymin)*H}return s}function invmap(a,b){ss=2;if(a<0.5){ss=xmin+(b*(xmax-xmin))/W}if(a>0.5){ss=(-b*(ymax-ymin))/H-ymin}return ss}function koordsys(){ctx.strokeStyle="#A0A0A0";for(var a=-10;a<=10;a++){Line(xmin,a,xmax,a);Line(a,ymin,a,ymax)}}function beschriftung(){ctx.strokeStyle="black";Line(xmin,0,xmax,0);Line(xmax-0.3,-0.3,xmax,0);Line(xmax-0.3,0.3,xmax,0);Line(1,-0.03,1,0.03);ctx.strokeText("1",map(0,1)-4,map(1,0)+12);Line(0,ymin,0,ymax);Line(-0.3,ymax-0.3,0,ymax);Line(0.3,ymax-0.3,0,ymax);Line(-0.03,1,0.03,1);ctx.strokeText("1",map(0,0)-8,map(1,1)+4)}function polarKS(){ctx.strokeStyle="#A0A0A0";for(var a=1;a<=14;a++){ctx.arc(Ursprungx,Ursprungy,map(0,a)-Ursprungx,0,2*Math.PI)}ctx.stroke()}function zeichne(){x1=Math.round(1000*x1)/1000;y1=Math.round(1000*y1)/1000;x2=Math.round(1000*x2)/1000;y2=Math.round(1000*y2)/1000;document.getElementById("x1").value=x1;document.getElementById("y1").value=y1;document.getElementById("x2").value=x2;document.getElementById("y2").value=y2;var c=Math.sqrt(zx*zx+zy*zy);if(zx!=0){var b=Math.atan(zy/zx)*180/Math.PI}if((zx==0)&&(zy==0)){b=0}if((zx==0)&&(zy>0)){b=90}if((zx==0)&&(zy<0)){b=270}if(zx<0){b=b+180}if((zx>0)&&(zy<0)){b=b+360}zx=Math.round(1000*zx)/1000;zy=Math.round(1000*zy)/1000;if(zy>=0){var a="<b>"+zx+" + "+zy+"i</b>"}else{var a="<b>"+zx+" - "+-zy+"i</b>"}Resultat.innerHTML=a;c=Math.round(1000*c)/1000;b=Math.round(1000*b)/1000;var d=c+" cis "+b+"Â°";Resultat_polar.innerHTML=d;ctx.clearRect(0,0,W,H);ctx.beginPath();ctx.strokeStyle="black";ctx.lineWidth="1";if(document.getElementById("polar").checked){polarKS()}else{koordsys()}beschriftung();ctx.stroke();ctx.beginPath();ctx.strokeStyle="black";pfeil(x1,y1);if(mode==3){Line(1,0,x1,y1)}if(mode==4){Line(x1,y1,zx,zy)}ctx.beginPath();ctx.arc(map(0,x1),map(1,y1),2,0,2*Math.PI);ctx.fillStyle="black";ctx.fill();ctx.stroke();ctx.beginPath();ctx.strokeStyle="red";pfeil(x2,y2);ctx.beginPath();if(mode==1){pfeil2(x1,y1,x2,y2)}if(mode==2){pfeil2(x1,y1,-x2,-y2)}if(mode==3){Line(x2,y2,zx,zy)}if(mode==4){Line(1,0,x2,y2)}ctx.beginPath();ctx.arc(map(0,x2),map(1,y2),2,0,2*Math.PI);ctx.fillStyle="red";ctx.fill();ctx.stroke();ctx.beginPath();ctx.strokeStyle="blue";pfeil(zx,zy);ctx.beginPath();ctx.arc(map(0,zx),map(1,zy),2,0,2*Math.PI);ctx.fillStyle="blue";ctx.fill();ctx.stroke()}function pfeil(a,d){var c=Math.sqrt(a*a+d*d);if(a!=0){var b=Math.atan(d/a)}if((a==0)&&(d>=0)){b=Math.PI/2}if((a==0)&&(d<0)){b=3*Math.PI/2}if(a<0){b=b+Math.PI}if((a>0)&&(d<0)){b=b+2*Math.PI}ctx.translate(Ursprungx,Ursprungy);ctx.rotate(-b);Line(xmin,ymax,xmin+c,ymax);Line(xmin+c-0.3,ymax+0.3,xmin+c,ymax);Line(xmin+c-0.3,ymax-0.3,xmin+c,ymax);ctx.rotate(b);ctx.translate(-Ursprungx,-Ursprungy)}function pfeil2(b,a,d,c){ctx.translate(map(0,b)-Ursprungx,map(1,a)-Ursprungy);pfeil(d,c);ctx.translate(-map(0,b)+Ursprungx,-map(1,a)+Ursprungy)}function getMousePos(b,a){var c=b.getBoundingClientRect();return{x:a.clientX-c.left,y:a.clientY-c.top}};