function resizeCanvas(){var e=document.getElementById("containercanvas");e.width=e.offsetWidth,W=e.width,W>400&&(W=400),H=W,Ursprungx=H/2,Ursprungy=W/2,initmade?(resize1(),zeichne()):init()}function init(){initmade=!0,window.addEventListener("resize",function(){resizeCanvas()}),canvas1=document.getElementById("myCanvas"),resize1(),ctx=canvas1.getContext("2d"),document.getElementById("Addition").checked=!0,document.getElementById("kartesisch").checked=!0,canvas1.addEventListener("mousedown",function(){mousedown=!0},!1),canvas1.addEventListener("mouseup",function(){mousedown=!1},!1),canvas1.addEventListener("mousemove",function(e){if(mousedown){var t=getMousePos(canvas1,e),n=invmap(0,t.x),i=invmap(1,t.y);Math.abs(n-x1)+Math.abs(i-y1)<Math.abs(n-x2)+Math.abs(i-y2)?(x1=n,y1=i):(x2=n,y2=i),1==mode&&doAddition(),2==mode&&doSubtraktion(),3==mode&&doMultiplikation(),4==mode&&doDivision()}},!1),zx=x1+x2,zy=y1+y2,zeichne()}function resize1(){canvas1.width=W,canvas1.height=H}function OnChangeCheckbox1(e){e.checked&&(mode=1,document.getElementById("Subtraktion").checked=!1,document.getElementById("Multiplikation").checked=!1,document.getElementById("Division").checked=!1,doAddition())}function OnChangeCheckbox2(e){e.checked&&(mode=2,document.getElementById("Addition").checked=!1,document.getElementById("Multiplikation").checked=!1,document.getElementById("Division").checked=!1,doSubtraktion())}function OnChangeCheckbox3(e){e.checked&&(mode=3,document.getElementById("Addition").checked=!1,document.getElementById("Subtraktion").checked=!1,document.getElementById("Division").checked=!1,doMultiplikation())}function OnChangeCheckbox4(e){e.checked&&(mode=4,document.getElementById("Addition").checked=!1,document.getElementById("Subtraktion").checked=!1,document.getElementById("Multiplikation").checked=!1,doDivision())}function OnChangeCheckbox5(e){e.checked&&(document.getElementById("polar").checked=!1,zeichne())}function OnChangeCheckbox6(e){e.checked&&(document.getElementById("kartesisch").checked=!1,zeichne())}function calc(){x1=parseFloat(document.getElementById("x1").value),y1=parseFloat(document.getElementById("y1").value),x2=parseFloat(document.getElementById("x2").value),y2=parseFloat(document.getElementById("y2").value),1==mode&&doAddition(),2==mode&&doSubtraktion(),3==mode&&doMultiplikation(),4==mode&&doDivision()}function doAddition(){zx=x1+x2,zy=y1+y2,zeichne()}function doSubtraktion(){zx=x1-x2,zy=y1-y2,zeichne()}function doMultiplikation(){zx=x1*x2-y1*y2,zy=x1*y2+x2*y1,zeichne()}function doDivision(){var e=x2*x2+y2*y2;e>0?(zx=(x1*x2+y1*y2)/e,zy=(-x1*y2+x2*y1)/e):(zx=0/0,zy=0/0),zeichne()}function Line(e,t,n,i){ctx.beginPath(),ctx.moveTo(map(0,e),map(1,t)),ctx.lineWidth="1",ctx.lineTo(map(0,n),map(1,i)),ctx.stroke()}function map(e,t){return s=2,.5>e&&(s=(t-xmin)/(xmax-xmin)*W),e>.5&&(s=(ymax-t)/(ymax-ymin)*H),s}function invmap(e,t){return ss=2,.5>e&&(ss=xmin+t*(xmax-xmin)/W),e>.5&&(ss=-t*(ymax-ymin)/H-ymin),ss}function koordsys(){ctx.strokeStyle="#A0A0A0";for(var e=-10;10>=e;e++)Line(xmin,e,xmax,e),Line(e,ymin,e,ymax)}function beschriftung(){ctx.strokeStyle="black",Line(xmin,0,xmax,0),Line(xmax-.3,-.3,xmax,0),Line(xmax-.3,.3,xmax,0),Line(1,-.03,1,.03),ctx.strokeText("1",map(0,1)-4,map(1,0)+12),Line(0,ymin,0,ymax),Line(-.3,ymax-.3,0,ymax),Line(.3,ymax-.3,0,ymax),Line(-.03,1,.03,1),ctx.strokeText("1",map(0,0)-8,map(1,1)+4)}function polarKS(){ctx.strokeStyle="#A0A0A0";for(var e=1;14>=e;e++)ctx.arc(Ursprungx,Ursprungy,map(0,e)-Ursprungx,0,2*Math.PI);ctx.stroke()}function zeichne(){if(x1=Math.round(1e3*x1)/1e3,y1=Math.round(1e3*y1)/1e3,x2=Math.round(1e3*x2)/1e3,y2=Math.round(1e3*y2)/1e3,document.getElementById("x1").value=x1,document.getElementById("y1").value=y1,document.getElementById("x2").value=x2,document.getElementById("y2").value=y2,zx=Math.round(1e3*zx)/1e3,zy=Math.round(1e3*zy)/1e3,zy>=0)var e=zx+" + "+zy+"i";else var e=zx+" - "+-zy+"i";Resultat.innerHTML=e,ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1",document.getElementById("polar").checked?polarKS():koordsys(),beschriftung(),ctx.stroke(),ctx.beginPath(),ctx.strokeStyle="black",pfeil(x1,y1),3==mode&&Line(1,0,x1,y1),4==mode&&Line(x1,y1,zx,zy),ctx.beginPath(),ctx.arc(map(0,x1),map(1,y1),2,0,2*Math.PI),ctx.fillStyle="black",ctx.fill(),ctx.stroke(),ctx.beginPath(),ctx.strokeStyle="red",pfeil(x2,y2),ctx.beginPath(),1==mode&&pfeil2(x1,y1,x2,y2),2==mode&&pfeil2(x1,y1,-x2,-y2),3==mode&&Line(x2,y2,zx,zy),4==mode&&Line(1,0,x2,y2),ctx.beginPath(),ctx.arc(map(0,x2),map(1,y2),2,0,2*Math.PI),ctx.fillStyle="red",ctx.fill(),ctx.stroke(),ctx.beginPath(),ctx.strokeStyle="blue",pfeil(zx,zy),ctx.beginPath(),ctx.arc(map(0,zx),map(1,zy),2,0,2*Math.PI),ctx.fillStyle="blue",ctx.fill(),ctx.stroke()}function pfeil(e,t){var n=Math.sqrt(e*e+t*t);if(0!=e)var i=Math.atan(t/e);0==e&&t>=0&&(i=Math.PI/2),0==e&&0>t&&(i=3*Math.PI/2),0>e&&(i+=Math.PI),e>0&&0>t&&(i+=2*Math.PI),ctx.translate(Ursprungx,Ursprungy),ctx.rotate(-i),Line(xmin,ymax,xmin+n,ymax),Line(xmin+n-.3,ymax+.3,xmin+n,ymax),Line(xmin+n-.3,ymax-.3,xmin+n,ymax),ctx.rotate(i),ctx.translate(-Ursprungx,-Ursprungy)}function pfeil2(e,t,n,i){ctx.translate(map(0,e)-Ursprungx,map(1,t)-Ursprungy),pfeil(n,i),ctx.translate(-map(0,e)+Ursprungx,-map(1,t)+Ursprungy)}function getMousePos(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}var H,W,Ursprungx,Ursprungy;deltax=40,xmax=10,xmin=-xmax,ymax=10,ymin=-ymax;var x1=1,y1=3,x2=-2,y2=1,canvas1,ctx,zx,zy,mode=1,mousedown=!1,initmade=!1;window.onload=resizeCanvas;