var W;var H;xmax=1.01;xmin=-xmax;ymax=xmax;ymin=-ymax;xm=W/2;ym=H/2;r=W/(xmax-xmin);xA=-0.7;yA=-f(xA);var xB=-xA;var yB=yA;var xC=-0.2;var yC=f(xC);var xMa,yMa;var xMb,yMb;var xMc,yMc;var canvas1;var ctx;var mousedown=false;var initmade=false;window.onload=resizeCanvas;function resizeCanvas(){var a=document.getElementById("containercanvas");a.width=a.offsetWidth;W=a.width;H=W;if(initmade){resize1();zeichne()}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(a){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");document.getElementById("VarC").checked=true;canvas1.addEventListener("mousedown",function(a){mousedown=true},false);canvas1.addEventListener("mouseup",function(a){mousedown=false},false);canvas1.addEventListener("mousemove",function(b){if(mousedown){var a=getMousePos(canvas1,b);var d=invmap(0,a.x);var c=invmap(1,a.y);if(document.getElementById("VarB").checked){xB=d;if(xB>1){xB=1}if(xB<-1){xB=-1}yB=f(xB);if(c<0){yB=-yB}zeichne()}else{xC=d;if(xC>1){xC=1}if(xC<-1){xC=-1}yC=f(xC);if(c<0){yC=-yC}zeichne()}}},false);zeichne()}function resize1(){canvas1.width=W;canvas1.height=H}function reset(){document.getElementById("VarC").checked=true;document.getElementById("VarB").checked=false;xB=-xA;yB=yA;xC=-0.2;yC=f(xC);zeichne()}function Line(b,d,a,c){ctx.beginPath();ctx.moveTo(map(0,b),map(1,d));ctx.lineWidth="1";ctx.lineTo(map(0,a),map(1,c));ctx.stroke()}function map(a,b){s=2;if(a<0.5){s=(b-xmin)/(xmax-xmin)*W}if(a>0.5){s=(ymax-b)/(ymax-ymin)*H}return s}function invmap(a,b){ss=2;if(a<0.5){ss=xmin+(b*(xmax-xmin))/W}if(a>0.5){ss=(-b*(ymax-ymin))/H-ymin}return ss}function zeichne(){ctx.clearRect(0,0,W,H);ctx.beginPath();ctx.strokeStyle="black";ctx.lineWidth="1";ctx.arc(W/2,H/2,r,0,2*Math.PI);ctx.stroke();ctx.beginPath();Line(xA,yA,xC,yC);Line(xB,yB,xC,yC);Line(xA,yA,xB,yB);xMa=(xB+xC)/2;yMa=(yB+yC)/2;xMb=(xA+xC)/2;yMb=(yA+yC)/2;xMc=(xA+xB)/2;yMc=(yA+yB)/2;Line(xMa,yMa,xMc,yMc);Line(xMb,yMb,xMc,yMc);Line(xMa,yMa,xMb,yMb);ctx.stroke();ctx.beginPath();ctx.strokeStyle="green";Line(xC,yC,xMc,yMc);Line(xA,yA,xMa,yMa);Line(xB,yB,xMb,yMb);var l=(xA+xB+xC)/3;var h=(yA+yB+yC)/3;ctx.stroke();ctx.beginPath();ctx.strokeStyle="red";var u=Berechne_t(xB,yB,xC,yC,xA,yA);var g=xB+u*(xC-xB);var q=yB+u*(yC-yB);Line(xA,yA,g,q);u=Berechne_t(xA,yA,xC,yC,xB,yB);var e=xA+u*(xC-xA);var p=yA+u*(yC-yA);Line(xB,yB,e,p);u=Berechne_t(xA,yA,xB,yB,xC,yC);var d=xA+u*(xB-xA);var o=yA+u*(yB-yA);Line(xC,yC,d,o);var b=3*l;var n=3*h;ctx.stroke();ctx.beginPath();ctx.strokeStyle="#A0A0A0";var m=l-0.5*(g-l);var i=h-0.5*(q-h);Line(xMa,yMa,m,i);var c=l-0.5*(e-l);var a=h-0.5*(p-h);Line(xMb,yMb,c,a);var k=l-0.5*(d-l);var j=h-0.5*(o-h);Line(xMc,yMc,k,j);ctx.stroke();ctx.beginPath();ctx.strokeStyle="blue";Line(0,0,b,n);ctx.stroke();ctx.font="14px Arial";ctx.fillText("A",map(0,xA)-10,map(1,yA)+10);ctx.fillText("B",map(0,xB),map(1,yB)+10);ctx.fillText("C",map(0,xC)-10,map(1,yC)+5);ctx.fillText("M",map(0,0)-5,map(1,0)+5);ctx.fillText("A'",map(0,xMa),map(1,yMa));ctx.fillText("B'",map(0,xMb)-10,map(1,yMb));ctx.fillText("C'",map(0,xMc)-10,map(1,yMc)+12);ctx.fillText("S",map(0,l),map(1,h));ctx.fillText("D",map(0,g),map(1,q));ctx.fillText("E",map(0,e)-10,map(1,p));ctx.fillText("F",map(0,d),map(1,o)+12);ctx.fillText("H",map(0,b),map(1,n)+10);ctx.fillText("D'",map(0,m)-10,map(1,i));ctx.fillText("E'",map(0,c),map(1,a)+10);ctx.fillText("F'",map(0,k)-5,map(1,j))}function dostep(){if(document.getElementById("VarB").checked){var a=BerechnePhi(xB,yB);a=a+Math.PI*5/180;if(a>2*Math.PI){a=a-2*Math.PI}xB=Math.cos(a);yB=Math.sin(a)}else{var a=BerechnePhi(xC,yC);a=a+Math.PI*5/180;if(a>2*Math.PI){a=a-2*Math.PI}xC=Math.cos(a);yC=Math.sin(a)}zeichne()}function getMousePos(b,a){var c=b.getBoundingClientRect();return{x:a.clientX-c.left,y:a.clientY-c.top}}function f(a){s=0;s=Math.sqrt(1-(a*a));return s}function BerechnePhi(a,c){var b=Math.abs(Math.atan(c/a));if((a<0)&&(c>0)){b=Math.PI-b}if((a<0)&&(c<0)){b=Math.PI+b}if((a>0)&&(c<0)){b=2*Math.PI-b}return b}function BerechneWinkel(){var g=Math.sqrt((xB-xA)*(xB-xA)+(yB-yA)*(yB-yA));var e=Math.sqrt((xB-xC)*(xB-xC)+(yB-yC)*(yB-yC));var d=Math.sqrt((xA-xC)*(xA-xC)+(yA-yC)*(yA-yC));if((e!=0)&&(d!=0)&&(g!=0)){Hilf=Math.round(18000*Math.acos((e*e+d*d-g*g)/2/e/d)/Math.PI)/100}else{Hilf=NaN}return Hilf}function Berechne_t(c,b,g,e,i,h){var a=(i-c)*(g-c)+(h-b)*(e-b);var d=(g-c)*(g-c)+(e-b)*(e-b);if(d!=0){t=a/d}else{t=NaN}return t};