var W;var H;sqrt2=Math.sqrt(2);sqrt3=Math.sqrt(3);sqrt5=Math.sqrt(5);r5p1=Math.sqrt(5)+1;r5m1=Math.sqrt(5)-1;var rotAxis=0;eps=0.000001;var t=4;var u0;var v0;nMax=100;var nE;var nK;var xE=new Array();var yE=new Array();var zE=new Array();var k0=new Array();var k1=new Array();var xN1=new Array();var yN1=new Array();var zN1=new Array();var xN2=new Array();var yN2=new Array();var zN2=new Array();var theta=15/180*Math.PI;var phi;var a1;var a2;var b1;var b2;var b3;var c1;var c2;var c3;var d;var canvas1;var ctx;var initmade=false;var mode=5;var timer;delay=400;var Weiter=false;var stop;window.onload=resizeCanvas;function resizeCanvas(){var a=document.getElementById("containercanvas");a.width=a.offsetWidth;W=a.width;if(W>400){W=400}H=W;u0=W/2;v0=H/2;if(initmade){resize1();zeichne()}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(a){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");document.getElementById(mode).style.backgroundColor="#00FF00";coordsIcosahedron();initPolyhedron();zeichne()}function resize1(){canvas1.width=W;canvas1.height=H}function zeichne(){ctx.clearRect(0,0,W,H);ctx.beginPath();ctx.strokeStyle="black";ctx.lineWidth="1";phi=-Math.PI/20*t;calcCoeff();for(var a=0;a<nK;a++){if(c1*xN1[a]+c2*yN1[a]+c3*zN1[a]>-eps||c1*xN2[a]+c2*yN2[a]+c3*zN2[a]>-eps){drawLine(k0[a],k1[a])}else{drawDashes(k0[a],k1[a])}}ctx.stroke();ctx.beginPath();ctx.strokeStyle="red";ctx.arc(u0,v0,1,0,2*Math.PI);ctx.stroke()}function button1(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode=1;document.getElementById(mode).style.backgroundColor="#00FF00";coordsTetrahedron();initPolyhedron();zeichne()}function button2(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode=2;document.getElementById(mode).style.backgroundColor="#00FF00";coordsHexahedron();initPolyhedron();zeichne()}function button3(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode=3;document.getElementById(mode).style.backgroundColor="#00FF00";coordsOctahedron();initPolyhedron();zeichne()}function button4(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode=4;document.getElementById(mode).style.backgroundColor="#00FF00";coordsDodecahedron();initPolyhedron();zeichne()}function button5(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode=5;document.getElementById(mode).style.backgroundColor="#00FF00";coordsIcosahedron();initPolyhedron();zeichne()}function run(){Weiter=!Weiter;if(Weiter){document.getElementById("STEP").disabled=true;document.getElementById("RUN").value="Stop"}else{document.getElementById("STEP").disabled=false;document.getElementById("RUN").value="Run"}stop=false;dorun()}function dorun(){if(!stop&&Weiter){dostep()}}function dostep(){t=t+1;if(t==40){t=0}stop=true;timer=setTimeout(function(){action()},delay);zeichne();dorun()}function action(){stop=false;clearTimeout(timer);dorun()}function doAxis(){rotAxis=rotAxis+1;if(rotAxis==3){rotAxis=0}if(rotAxis==0){document.getElementById("ax").innerHTML="durch Ecke"}if(rotAxis==1){document.getElementById("ax").innerHTML="durch Kantenmittelpunkt"}if(rotAxis==2){document.getElementById("ax").innerHTML="durch Fl√§chenmittelpunkt"}updateCoords();initPolyhedron();zeichne()}function calc(){theta=parseInt(document.getElementById("theta").value);if(theta<-90){theta=-90}if(theta>90){theta=90}document.getElementById("theta").value=theta;theta=theta*Math.PI/180;zeichne()}function kippen(f,b){var a=f*Math.PI/180;var n=Math.cos(a);var m=Math.sin(a);for(var e=0;e<nE;e++){var l=xE[e];var h=yE[e];xE[e]=l*n-h*m;yE[e]=l*m+h*n}a=b*Math.PI/180;n=Math.cos(a);m=Math.sin(a);for(var c=0;c<nE;c++){var k=yE[c];var g=zE[c];yE[c]=k*n-g*m;zE[c]=k*m+g*n}}function coordsTetrahedron(){nE=4;d=sqrt2/3;xE[0]=2;yE[0]=0;zE[0]=-sqrt2/2;xE[1]=-1;yE[1]=sqrt3;zE[1]=-sqrt2/2;xE[2]=-1;yE[2]=-sqrt3;zE[2]=-sqrt2/2;xE[3]=0;yE[3]=0;zE[3]=(3*sqrt2)/2;for(var a=0;a<4;a++){xE[a]*=d;yE[a]*=d;zE[a]*=d}if(rotAxis==1){kippen(90,Math.acos(1/sqrt3)*180/Math.PI)}else{if(rotAxis==2){kippen(0,180)}}}function coordsHexahedron(){nE=8;for(var a=0;a<8;a++){if(a/2==Math.floor(a/2)){faktor=0}else{faktor=1}if(Math.floor(a/2)/2==Math.floor(Math.floor(a/2)/2)){faktor1=0}else{faktor1=1}xE[a]=1-2*Math.floor((a/4));yE[a]=1-2*faktor1;zE[a]=1-2*faktor;xE[a]/=sqrt3;yE[a]/=sqrt3;zE[a]/=sqrt3}if(rotAxis==0){kippen(45,Math.acos(1/sqrt3)*180/Math.PI)}else{if(rotAxis==1){kippen(45,90)}}}function coordsOctahedron(){nE=6;for(var a=0;a<6;a++){xE[a]=yE[a]=zE[a]=0}xE[0]=yE[1]=zE[2]=1;xE[3]=yE[4]=zE[5]=-1;if(rotAxis==1){kippen(0,45)}else{if(rotAxis==2){kippen(45,Math.acos(1/sqrt3)*180/Math.PI)}}}function coordsDodecahedron(){d=Math.sqrt(12);nE=20;xE[0]=2;yE[0]=2;zE[0]=2;xE[1]=-2;yE[1]=2;zE[1]=2;xE[2]=2;yE[2]=-2;zE[2]=2;xE[3]=2;yE[3]=2;zE[3]=-2;xE[4]=0;yE[4]=r5p1;zE[4]=r5m1;xE[5]=0;yE[5]=r5p1;zE[5]=-r5m1;xE[6]=r5m1;yE[6]=0;zE[6]=r5p1;xE[7]=-r5m1;yE[7]=0;zE[7]=r5p1;xE[8]=r5p1;yE[8]=r5m1;zE[8]=0;xE[9]=r5p1;yE[9]=-r5m1;zE[9]=0;for(var b=0;b<10;b++){xE[10+b]=-xE[b];yE[10+b]=-yE[b];zE[10+b]=-zE[b]}for(var a=0;a<20;a++){xE[a]/=d;yE[a]/=d;zE[a]/=d}if(rotAxis==0){var e=Math.asin(2/(r5p1*sqrt3));kippen(90,e*180/Math.PI)}else{if(rotAxis==2){var c=Math.atan(2*Math.sqrt((5+2*sqrt5)/(50+22*sqrt5)));kippen(0,c*180/Math.PI)}}}function coordsIcosahedron(){var e=Math.sqrt(10-2*sqrt5);nE=12;xE[0]=0;yE[0]=2;zE[0]=r5m1;xE[1]=0;yE[1]=2;zE[1]=-r5m1;xE[2]=r5m1;yE[2]=0;zE[2]=2;xE[3]=-r5m1;yE[3]=0;zE[3]=2;xE[4]=2;yE[4]=r5m1;zE[4]=0;xE[5]=2;yE[5]=-r5m1;zE[5]=0;for(var b=0;b<6;b++){xE[6+b]=-xE[b];yE[6+b]=-yE[b];zE[6+b]=-zE[b]}for(var a=0;a<12;a++){xE[a]/=e;yE[a]/=e;zE[a]/=e}if(rotAxis==0){d1=Math.asin(Math.sqrt(2/(5+sqrt5)));kippen(90,d1*180/Math.PI)}else{if(rotAxis==2){var c=Math.atan(Math.sqrt(2/(7+3*sqrt5)));kippen(0,c*180/Math.PI)}}}function initPolyhedron(){nK=0;for(var b=0;b<nE-1;b++){for(var a=b+1;a<nE;a++){if(istKante(b,a)){k0[nK]=b;k1[nK]=a;nK++}}}}function screenU(b,a){return u0+Math.round(u0*(a1*b+a2*a))}function screenV(c,b,a){return v0+Math.round(v0*(b1*c+b2*b+b3*a))}function drawLine(e,c){var b=screenU(xE[e],yE[e]);var a=screenV(xE[e],yE[e],zE[e]);var f=screenU(xE[c],yE[c]);var g=screenV(xE[c],yE[c],zE[c]);ctx.strokeStyle="blue";ctx.moveTo(b,a);ctx.lineTo(f,g)}function drawDashes(q,p){var n=Math.round(screenU(xE[q],yE[q]));var m=Math.round(screenV(xE[q],yE[q],zE[q]));var h=Math.round(screenU(xE[p],yE[p]));var b=Math.round(screenV(xE[p],yE[p],zE[p]));var u=h-n;var A=b-m;var z=Math.sqrt(u*u+A*A);var o=Math.floor(z/15);var y=u/(3*o+2);var x=A/(3*o+2);ctx.strokeStyle="blue";for(var f=0;f<=o;f++){var w=n+(f*3)*y;var v=m+(f*3)*x;var s=w+2*y;var r=v+2*x;var a=Math.round(w);var c=Math.round(v);var g=Math.round(s);var e=Math.round(r);ctx.moveTo(a,c);ctx.lineTo(g,e)}}function istFlaeche(g,e,c,s){var f=false;var b=false;var q=xE[g];var D=yE[g];var C=zE[g];var A=xE[e]-q;var y=yE[e]-D;var w=zE[e]-C;var u=xE[c]-q;var p=yE[c]-D;var n=zE[c]-C;var h=y*n-w*p;var B=w*u-A*n;var z=A*p-y*u;for(var a=0;a<nE;a++){var x=xE[a]-q;var r=yE[a]-D;var o=zE[a]-C;var m=h*x+B*r+z*o;if(m<-eps){f=true}if(m>eps){b=true}if(f&&b){break}}var v=Math.sqrt(h*h+B*B+z*z);if(v<eps){return false}if(f&&!b){v=-v}s[0]=h/v;s[1]=B/v;s[2]=z/v;return !f||!b}function istKante(g,f){var e=0;var n=new Array();var m=0;var b=0;var a=0;for(var c=0;c<nE;c++){if(c==g||c==f){continue}var h=istFlaeche(g,f,c,n);if(!h){continue}if(++e==1){m=n[0];b=n[1];a=n[2];xN1[nK]=m;yN1[nK]=b;zN1[nK]=a}if(e!=2){continue}var o=m*n[0]+b*n[1]+a*n[2];if(Math.abs(o*o-1)<eps){e--;continue}xN2[nK]=n[0];yN2[nK]=n[1];zN2[nK]=n[2];break}return e==2}function calcCoeff(){d=Math.sin(theta);d1=Math.cos(theta);a1=Math.sin(phi);a2=-Math.cos(phi);b1=d*a2;b2=-d*a1;b3=-d1;c1=-d1*a2;c2=d1*a1;c3=-d}function updateCoords(){switch(nE){case 4:coordsTetrahedron();break;case 8:coordsHexahedron();break;case 6:coordsOctahedron();break;case 20:coordsDodecahedron();break;case 12:coordsIcosahedron();break}};