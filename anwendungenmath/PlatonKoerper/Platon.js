function resizeCanvas(){var e=document.getElementById("containercanvas");e.width=e.offsetWidth,W=e.width,W>400&&(W=400),H=W,u0=W/2,v0=H/2,initmade?(resize1(),zeichne()):init()}function init(){initmade=!0,window.addEventListener("resize",function(){resizeCanvas()}),canvas1=document.getElementById("myCanvas"),resize1(),ctx=canvas1.getContext("2d"),document.getElementById("Ikosaeder").checked=!0,coordsIcosahedron(),initPolyhedron(),zeichne()}function resize1(){canvas1.width=W,canvas1.height=H}function zeichne(){ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1",phi=-Math.PI/20*t,calcCoeff();for(var e=0;nK>e;e++)c1*xN1[e]+c2*yN1[e]+c3*zN1[e]>-eps||c1*xN2[e]+c2*yN2[e]+c3*zN2[e]>-eps?drawLine(k0[e],k1[e]):drawDashes(k0[e],k1[e]);ctx.stroke(),ctx.beginPath(),ctx.strokeStyle="red",ctx.arc(u0,v0,1,0,2*Math.PI),ctx.stroke()}function OnChangeCheckbox1(e){e.checked&&(document.getElementById("Hexaeder").checked=!1,document.getElementById("Oktaeder").checked=!1,document.getElementById("Dodekaeder").checked=!1,document.getElementById("Ikosaeder").checked=!1,coordsTetrahedron(),initPolyhedron(),zeichne())}function OnChangeCheckbox2(e){e.checked&&(document.getElementById("Tetraeder").checked=!1,document.getElementById("Oktaeder").checked=!1,document.getElementById("Dodekaeder").checked=!1,document.getElementById("Ikosaeder").checked=!1,coordsHexahedron(),initPolyhedron(),zeichne())}function OnChangeCheckbox3(e){e.checked&&(document.getElementById("Tetraeder").checked=!1,document.getElementById("Hexaeder").checked=!1,document.getElementById("Dodekaeder").checked=!1,document.getElementById("Ikosaeder").checked=!1,coordsOctahedron(),initPolyhedron(),zeichne())}function OnChangeCheckbox4(e){e.checked&&(document.getElementById("Tetraeder").checked=!1,document.getElementById("Hexaeder").checked=!1,document.getElementById("Oktaeder").checked=!1,document.getElementById("Ikosaeder").checked=!1,coordsDodecahedron(),initPolyhedron(),zeichne())}function OnChangeCheckbox5(e){e.checked&&(document.getElementById("Tetraeder").checked=!1,document.getElementById("Hexaeder").checked=!1,document.getElementById("Oktaeder").checked=!1,document.getElementById("Dodekaeder").checked=!1,coordsIcosahedron(),initPolyhedron(),zeichne())}function run(){Weiter=!Weiter,document.getElementById("STEP").disabled=Weiter?!0:!1,stop=!1,dorun()}function dorun(){!stop&&Weiter&&dostep()}function dostep(){t+=1,40==t&&(t=0),stop=!0,timer=setTimeout(function(){action()},delay),zeichne(),dorun()}function action(){stop=!1,clearTimeout(timer),dorun()}function doAxis(){rotAxis+=1,3==rotAxis&&(rotAxis=0),updateCoords(),initPolyhedron(),zeichne()}function calc(){theta=parseInt(document.getElementById("theta").value),-90>theta&&(theta=-90),theta>90&&(theta=90),document.getElementById("theta").value=theta,theta=theta*Math.PI/180,zeichne()}function kippen(e,t){for(var r=e*Math.PI/180,n=Math.cos(r),a=Math.sin(r),o=0;nE>o;o++){var c=xE[o],d=yE[o];xE[o]=c*n-d*a,yE[o]=c*a+d*n}r=t*Math.PI/180,n=Math.cos(r),a=Math.sin(r);for(var E=0;nE>E;E++){var h=yE[E],s=zE[E];yE[E]=h*n-s*a,zE[E]=h*a+s*n}}function coordsTetrahedron(){nE=4,d=sqrt2/3,xE[0]=2,yE[0]=0,zE[0]=-sqrt2/2,xE[1]=-1,yE[1]=sqrt3,zE[1]=-sqrt2/2,xE[2]=-1,yE[2]=-sqrt3,zE[2]=-sqrt2/2,xE[3]=0,yE[3]=0,zE[3]=3*sqrt2/2;for(var e=0;4>e;e++)xE[e]*=d,yE[e]*=d,zE[e]*=d;1==rotAxis?kippen(90,180*Math.acos(1/sqrt3)/Math.PI):2==rotAxis&&kippen(0,180)}function coordsHexahedron(){nE=8;for(var e=0;8>e;e++)faktor=e/2==Math.floor(e/2)?0:1,faktor1=Math.floor(e/2)/2==Math.floor(Math.floor(e/2)/2)?0:1,xE[e]=1-2*Math.floor(e/4),yE[e]=1-2*faktor1,zE[e]=1-2*faktor,xE[e]/=sqrt3,yE[e]/=sqrt3,zE[e]/=sqrt3;0==rotAxis?kippen(45,180*Math.acos(1/sqrt3)/Math.PI):1==rotAxis&&kippen(45,90)}function coordsOctahedron(){nE=6;for(var e=0;6>e;e++)xE[e]=yE[e]=zE[e]=0;xE[0]=yE[1]=zE[2]=1,xE[3]=yE[4]=zE[5]=-1,1==rotAxis?kippen(0,45):2==rotAxis&&kippen(45,180*Math.acos(1/sqrt3)/Math.PI)}function coordsDodecahedron(){d=Math.sqrt(12),nE=20,xE[0]=2,yE[0]=2,zE[0]=2,xE[1]=-2,yE[1]=2,zE[1]=2,xE[2]=2,yE[2]=-2,zE[2]=2,xE[3]=2,yE[3]=2,zE[3]=-2,xE[4]=0,yE[4]=r5p1,zE[4]=r5m1,xE[5]=0,yE[5]=r5p1,zE[5]=-r5m1,xE[6]=r5m1,yE[6]=0,zE[6]=r5p1,xE[7]=-r5m1,yE[7]=0,zE[7]=r5p1,xE[8]=r5p1,yE[8]=r5m1,zE[8]=0,xE[9]=r5p1,yE[9]=-r5m1,zE[9]=0;for(var e=0;10>e;e++)xE[10+e]=-xE[e],yE[10+e]=-yE[e],zE[10+e]=-zE[e];for(var t=0;20>t;t++)xE[t]/=d,yE[t]/=d,zE[t]/=d;if(0==rotAxis){var r=Math.asin(2/(r5p1*sqrt3));kippen(90,180*r/Math.PI)}else if(2==rotAxis){var n=Math.atan(2*Math.sqrt((5+2*sqrt5)/(50+22*sqrt5)));kippen(0,180*n/Math.PI)}}function coordsIcosahedron(){var e=Math.sqrt(10-2*sqrt5);nE=12,xE[0]=0,yE[0]=2,zE[0]=r5m1,xE[1]=0,yE[1]=2,zE[1]=-r5m1,xE[2]=r5m1,yE[2]=0,zE[2]=2,xE[3]=-r5m1,yE[3]=0,zE[3]=2,xE[4]=2,yE[4]=r5m1,zE[4]=0,xE[5]=2,yE[5]=-r5m1,zE[5]=0;for(var t=0;6>t;t++)xE[6+t]=-xE[t],yE[6+t]=-yE[t],zE[6+t]=-zE[t];for(var r=0;12>r;r++)xE[r]/=e,yE[r]/=e,zE[r]/=e;if(0==rotAxis)d1=Math.asin(Math.sqrt(2/(5+sqrt5))),kippen(90,180*d1/Math.PI);else if(2==rotAxis){var n=Math.atan(Math.sqrt(2/(7+3*sqrt5)));kippen(0,180*n/Math.PI)}}function initPolyhedron(){nK=0;for(var e=0;nE-1>e;e++)for(var t=e+1;nE>t;t++)istKante(e,t)&&(k0[nK]=e,k1[nK]=t,nK++)}function screenU(e,t){return u0+Math.round(u0*(a1*e+a2*t))}function screenV(e,t,r){return v0+Math.round(v0*(b1*e+b2*t+b3*r))}function drawLine(e,t){var r=screenU(xE[e],yE[e]),n=screenV(xE[e],yE[e],zE[e]),a=screenU(xE[t],yE[t]),o=screenV(xE[t],yE[t],zE[t]);ctx.strokeStyle="blue",ctx.moveTo(r,n),ctx.lineTo(a,o)}function drawDashes(e,t){var r=Math.round(screenU(xE[e],yE[e])),n=Math.round(screenV(xE[e],yE[e],zE[e])),a=Math.round(screenU(xE[t],yE[t])),o=Math.round(screenV(xE[t],yE[t],zE[t])),c=a-r,d=o-n,E=Math.sqrt(c*c+d*d),h=Math.floor(E/15),s=c/(3*h+2),i=d/(3*h+2);ctx.strokeStyle="blue";for(var y=0;h>=y;y++){var x=r+3*y*s,u=n+3*y*i,k=x+2*s,m=u+2*i,f=Math.round(x),z=Math.round(u),l=Math.round(k),M=Math.round(m);ctx.moveTo(f,z),ctx.lineTo(l,M)}}function istFlaeche(e,t,r,n){for(var a=!1,o=!1,c=xE[e],d=yE[e],E=zE[e],h=xE[t]-c,s=yE[t]-d,i=zE[t]-E,y=xE[r]-c,x=yE[r]-d,u=zE[r]-E,k=s*u-i*x,m=i*y-h*u,f=h*x-s*y,z=0;nE>z;z++){var l=xE[z]-c,M=yE[z]-d,v=zE[z]-E,p=k*l+m*M+f*v;if(-eps>p&&(a=!0),p>eps&&(o=!0),a&&o)break}var I=Math.sqrt(k*k+m*m+f*f);return eps>I?!1:(a&&!o&&(I=-I),n[0]=k/I,n[1]=m/I,n[2]=f/I,!a||!o)}function istKante(e,t){for(var r=0,n=new Array,a=0,o=0,c=0,d=0;nE>d;d++)if(d!=e&&d!=t){var E=istFlaeche(e,t,d,n);if(E&&(1==++r&&(a=n[0],o=n[1],c=n[2],xN1[nK]=a,yN1[nK]=o,zN1[nK]=c),2==r)){var h=a*n[0]+o*n[1]+c*n[2];if(!(Math.abs(h*h-1)<eps)){xN2[nK]=n[0],yN2[nK]=n[1],zN2[nK]=n[2];break}r--}}return 2==r}function calcCoeff(){d=Math.sin(theta),d1=Math.cos(theta),a1=Math.sin(phi),a2=-Math.cos(phi),b1=d*a2,b2=-d*a1,b3=-d1,c1=-d1*a2,c2=d1*a1,c3=-d}function updateCoords(){switch(nE){case 4:coordsTetrahedron();break;case 8:coordsHexahedron();break;case 6:coordsOctahedron();break;case 20:coordsDodecahedron();break;case 12:coordsIcosahedron()}}var W,H;sqrt2=Math.sqrt(2),sqrt3=Math.sqrt(3),sqrt5=Math.sqrt(5),r5p1=Math.sqrt(5)+1,r5m1=Math.sqrt(5)-1;var rotAxis=0;eps=1e-6;var t=4,u0,v0;nMax=100;var nE,nK,xE=new Array,yE=new Array,zE=new Array,k0=new Array,k1=new Array,xN1=new Array,yN1=new Array,zN1=new Array,xN2=new Array,yN2=new Array,zN2=new Array,theta=15/180*Math.PI,phi,a1,a2,b1,b2,b3,c1,c2,c3,d,canvas1,ctx,initmade=!1,timer;delay=400;var Weiter=!1,stop;window.onload=resizeCanvas;