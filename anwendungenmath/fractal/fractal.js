var fractal;var n=40000;var anzahl;var farbe=[0,12800,25600,38400,49664,65280,3342080,6618880,9895680];var q=new Array(1);var a=new Array(8);var b=new Array(8);var c=new Array(8);var d=new Array(8);var e=new Array(8);var f=new Array(8);var wahl=1;var canvas1;var ctx;var initmade=false;window.onload=resizeCanvas;for(var j=0;j<farbe.length;j++){var color=farbe[j];farbe[j]=(255<<24)|((color&255)<<16)|(color&65280)|(color>>16)}function resizeCanvas(){var g=document.getElementById("containercanvas");g.width=g.offsetWidth;W=g.width;if(W>400){W=400}H=Math.round(0.75*W);if(initmade){resize1();zeichne()}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(g){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");farn()}function resize1(){canvas1.width=W;canvas1.height=H}function iterate(g,u,r,t,s,o,m,l,h){q[0]=t[g]*u+s[g]*r+l[g];q[1]=o[g]*u+m[g]*r+h[g];return q}function BerechneWkeit(m,u,t,s,o){var g=new Array(m);var l=new Array(m);var r=0;for(var k=1;k<=m;k++){l[k]=Math.abs(u[k]*o[k]-t[k]*s[k]);r=r+l[k]}if(r==0){r=0.0001}g[0]=0;for(k=1;k<m;k++){l[k]=l[k]/r;if(l[k]==0){l[k]=0.003}g[k]=g[k-1]+l[k]}g[m]=1;return g}function zeichne(){var t=ctx.getImageData(0,0,W,H);var l=new ArrayBuffer(t.data.length);var g=new Uint8ClampedArray(l);var s=new Uint32Array(l);q[0]=0;q[1]=0;p=BerechneWkeit(anzahl,a,b,c,d);document.getElementById("ART").innerHTML=fractal+" ("+n+" Punkte)";for(i=1;i<=n;i++){var r=Math.random();var h=0;while(!((p[h]<=r)&&(r<=p[h+1]))){h++}h++;q=iterate(h,q[0],q[1],a,b,c,d,e,f);var o=Math.round(q[0]*W);var m=H-Math.round(q[1]*H*0.97);s[m*W+o]=farbe[h]}t.data.set(g);ctx.putImageData(t,0,0)}function farn(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=1;document.getElementById("1").style.backgroundColor="#00FF00";fractal="Farn";anzahl=4;a=[0,0,0.197,-0.15,0.849];b=[0,0,-0.226,0.283,0.037];c=[0,0,0.226,0.26,-0.037];d=[0,0.16,0.197,0.237,0.849];e=[0,0.5,0.4,0.575,0.075];f=[0,0,0.049,-0.084,0.183];zeichne()}function ahorn(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=2;document.getElementById("2").style.backgroundColor="#00FF00";fractal="Ahorn";anzahl=5;a=[0,0.352,0.353,0.5,0.502,0.004];b=[0,0.355,-0.354,0,-0.002,0];c=[0,-0.355,0.354,0,0.002,0];d=[0,0.352,0.353,0.5,0.588,0.578];e=[0,0.354,0.288,0.25,0.25,0.501];f=[0,0.5,0.153,0.462,0.105,0.03];zeichne()}function sierpinski(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=3;document.getElementById("3").style.backgroundColor="#00FF00";fractal="Sierpinski";anzahl=3;a=[0,0.5,0.5,0.5];b=[0,0,0,0];c=b;d=[0,0.5,0.5,0.5];e=[0,0,0.5,0.25];f=[0,0,0,0.5];zeichne()}function eiche(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=4;document.getElementById("4").style.backgroundColor="#00FF00";fractal="Eiche";anzahl=5;a=[0,0.195,0.462,-0.058,-0.035,-0.637];b=[0,-0.488,0.414,-0.07,0.07,0];c=[0,0.344,-0.252,0.453,-0.469,0];d=[0,0.443,0.361,-0.111,-0.022,0.501];e=[0,0.4431,0.2511,0.5976,0.4884,0.8562];f=[0,0.2452,0.5692,0.0969,0.5069,0.2513];zeichne()}function baum(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=5;document.getElementById("5").style.backgroundColor="#00FF00";fractal="Baum";anzahl=8;a=[0,0.0086,0.4481,0.0118,-0.0447,0.6314,0.2711,-0.1151,0.0165];b=[0,-0.127,0.5287,-0.0022,-0.4193,-0.1371,0.3458,0.2965,0];c=[0,0.0053,-0.2171,0.0001,0.4365,0.1303,-0.2493,-0.2193,0];d=[0,0.2035,0.5339,0.3729,-0.043,0.6644,0.3761,-0.1556,0.0613];e=[0,0.5239,0.2934,0.5114,0.4809,0.1062,0.3631,0.6246,0.5087];f=[0,0.1685,0.4904,0.0195,0.0941,0.2368,0.3575,0.4381,0.0022];zeichne()}function koch(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=6;document.getElementById("6").style.backgroundColor="#00FF00";fractal="Koch";anzahl=4;a=[0,0.3333,0.3333,0.1667,-0.1667];b=[0,0,0,-0.2887,0.2887];c=[0,0,0,0.2887,0.2887];d=[0,0.3333,0.3333,0.1667,0.1667];e=[0,0,0.6667,0.3333,0.6667];f=[0,0,0,0,0];zeichne()}function duerer(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=7;document.getElementById("7").style.backgroundColor="#00FF00";fractal="Duerer";anzahl=5;a=[0,0.382,0.382,0.382,0.382,0.382];b=[0,0,0,0,0,0];c=b;d=a;e=[0,0.3072,0.6033,0.0139,0.1253,0.492];f=[0,0.619,0.4044,0.4044,0.0595,0.0595];zeichne()}function menger(){document.getElementById(wahl).style.backgroundColor="#E0FFFF";wahl=8;document.getElementById("8").style.backgroundColor="#00FF00";fractal="Menger";anzahl=8;a=[0,0.333,0.333,0.333,0.333,0.333,0.333,0.333,0.333];b=[0,0,0,0,0,0,0,0,0];c=b;d=a;e=[0,0,0.3333,0.6667,0,0.6667,0,0.3333,0.6667];f=[0,0,0,0,0.3333,0.3333,0.6667,0.6667,0.6667];zeichne()}function doppelt(){document.getElementById("half").disabled=false;if(n<=80000){if(n==80000){document.getElementById("double").disabled=true}n=2*n;zeichne()}}function halb(){document.getElementById("double").disabled=false;if(n>=10000){if(n==10000){document.getElementById("half").disabled=true}n=n/2;zeichne()}};