var n=100;var cx=-0.7;var cy=0.3;var mandelbrot=false;var farbe=[0,31,63,95,127,159,191,223,255,8191,16383,24575,32767,40959,49151,57343,65535,2097151,4194303,6291455,8388607,10485759,6684671,14680063,16777215,14680063,12582911,10485759,8388607,6291455,4194303,2097151,65535,57343,49151,40959,32767,24575,16383,8191,255,223,191,159,127,95,63,31];Rmax=4;const X0=-1.6;const X1=1.6;const DiffX=X1-X0;const X0M=-2.2;const X1M=1;const DiffXM=X1M-X0M;const Y0=-1.3;const Y1=1.3;const DiffY=Y1-Y0;var canvas1;var ctx;var initmade=false;var W;var H;window.onload=function(){resizeCanvas()};for(var j=0;j<farbe.length;j++){var color=farbe[j];farbe[j]=(255<<24)|((color&255)<<16)|(color&65280)|(color>>16)}function resizeCanvas(){var b=document.getElementById("containercanvas");b.width=b.offsetWidth;W=b.width;if(W>480){W=460}H=Math.round(0.8*W);if(H%2!=0){H++}if(initmade){resize1();if(mandelbrot){zeichnemandelbrot()}else{zeichne()}}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(b){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");canvas1.addEventListener("click",function(c){if(mandelbrot){var d=getMousePos(canvas1,c);cx=X0M+d.x*DiffXM/W;if(cx<X0M){cx=X0M}if(cx>X1M){cx=X1M}cx=Math.round(cx*1000)/1000;cy=Y1-d.y*DiffY/H;if(cy>Y1){cy=Y1}if(cy<Y0){cy=Y0}cy=Math.round(cy*1000)/1000;setzeWerte()}},false);canvas1.addEventListener("mousemove",function(e){if(mandelbrot){var f=getMousePos(canvas1,e);var h=X0M+f.x*DiffXM/W;if(h<X0M){h=X0M}if(h>X1M){h=X1M}h=Math.round(h*1000)/1000;var g=Y1-f.y*DiffY/H;if(g<Y0){g=Y0}if(g>Y1){g=Y1}g=Math.round(g*1000)/1000;document.getElementById("Rec").innerHTML=""+h;document.getElementById("Imc").innerHTML=""+g}},false);setzeWerte();zeichne()}function resize1(){canvas1.width=W;canvas1.height=H}function mandel(){if(!mandelbrot){zeichnemandelbrot()}else{zeichne()}}function zeichne(){mandelbrot=false;var k=ctx.getImageData(0,0,W,H);var l=new ArrayBuffer(k.data.length);var B=new Uint8ClampedArray(l);var m=new Uint32Array(l);var o=DiffX/W;var p=DiffY/H;for(var q=0;q<W;q++){for(var r=0;r<H/2;r++){var u=X0+o*q;var w=Y0+p*r;var t=0;while((u*u+w*w<Rmax)&&(t<n)){var A=u;u=u*u-w*w+cx;w=2*A*w-cy;t++}if(t==n){t=0}var s=t-farbe.length*Math.floor(t/farbe.length);m[r*W+q]=farbe[s];var z=W-1-q;var v=H-1-r;m[v*W+z]=farbe[s]}}k.data.set(B);ctx.putImageData(k,0,0)}function zeichnemandelbrot(){mandelbrot=true;var k=ctx.getImageData(0,0,W,H);var o=new ArrayBuffer(k.data.length);var z=new Uint8ClampedArray(o);var p=new Uint32Array(o);var q=DiffXM/W;var r=DiffY/H;for(var s=0;s<W;s++){for(var t=0;t<H/2;t++){var c=X0M+q*s;var b=c;var m=Y0+r*t;var l=m;var v=0;while((b*b+l*l<Rmax)&&(v<n)){var x=b;b=b*b-l*l+c;l=2*x*l+m;v++}if(v==n){v=0}var u=v-farbe.length*Math.floor(v/farbe.length);p[t*W+s]=farbe[u];var w=H-1-t;p[w*W+s]=farbe[u]}}k.data.set(z);ctx.putImageData(k,0,0)}function einlesen(){if(document.getElementById("rc").value==""){cx=-0.7}else{cx=parseFloat(document.getElementById("rc").value)}if(cx<X0M){cx=X0M}if(cx>X1M){cx=X1M}if(document.getElementById("ic").value==""){cy=0.3}else{cy=parseFloat(document.getElementById("ic").value)}if(cy<Y0){cy=Y0}if(cy>Y1){cy=Y1}setzeWerte();zeichne()}function setzeWerte(){document.getElementById("rc").value=cx;document.getElementById("ic").value=cy;document.getElementById("Rec").innerHTML=""+cx;document.getElementById("Imc").innerHTML=""+cy}function getMousePos(d,e){var f=d.getBoundingClientRect();return{x:e.clientX-f.left,y:e.clientY-f.top}}function logo(){cx=0;cy=1;setzeWerte();zeichne()}function doppelt(){document.getElementById("half").disabled=false;if(n<=200){if(n==200){document.getElementById("double").disabled=true}n=2*n;document.getElementById("N").innerHTML=n;if(mandelbrot){zeichnemandelbrot()}else{zeichne()}}}function halb(){document.getElementById("double").disabled=false;if(n>=50){if(n==50){document.getElementById("half").disabled=true}n=n/2;document.getElementById("N").innerHTML=n;if(mandelbrot){zeichnemandelbrot()}else{zeichne()}}};