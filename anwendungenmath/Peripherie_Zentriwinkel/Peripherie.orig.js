function resizeCanvas(){var e=document.getElementById("containercanvas");e.width=e.offsetWidth,W=e.width,W>400&&(W=400),H=W,einheit=W/(xmax-xmin),xm=W/2,ym=H/2,r=W/(xmax-xmin),initmade?(resize1(),zeichne()):init()}function init(){initmade=!0,window.addEventListener("resize",function(){resizeCanvas()}),canvas1=document.getElementById("myCanvas"),resize1(),ctx=canvas1.getContext("2d"),document.getElementById("VarP").checked=!0,canvas1.addEventListener("mousedown",function(){mousedown=!0},!1),canvas1.addEventListener("mouseup",function(){mousedown=!1},!1),canvas1.addEventListener("mousemove",function(e){if(mousedown){var t=getMousePos(canvas1,e),n=invmap(0,t.x),a=invmap(1,t.y);document.getElementById("VarB").checked?(xB=n,xB>1&&(xB=1),-1>xB&&(xB=-1),yB=f(xB),0>a&&(yB=-yB),zeichne()):(xP=n,xP>1&&(xP=1),-1>xP&&(xP=-1),yP=f(xP),0>a&&(yP=-yP),zeichne())}},!1),zeichne()}function resize1(){canvas1.width=W,canvas1.height=H}function OnChangeCheckbox1(e){document.getElementById("VarB").checked=e.checked?!1:!0}function OnChangeCheckbox2(e){e.checked?(document.getElementById("VarP").checked=!1,document.getElementById("Tk").checked=!1):document.getElementById("VarP").checked=!0}function OnChangeCheckbox3(e){e.checked&&(xB=1,yB=0,document.getElementById("VarP").checked=!0,document.getElementById("VarB").checked=!1,zeichne())}function Line(e,t,n,a){ctx.beginPath(),ctx.moveTo(map(0,e),map(1,t)),ctx.lineWidth="1",ctx.lineTo(map(0,n),map(1,a)),ctx.stroke()}function map(e,t){return s=2,.5>e&&(s=(t-xmin)/(xmax-xmin)*W),e>.5&&(s=(ymax-t)/(ymax-ymin)*H),s}function invmap(e,t){return ss=2,.5>e&&(ss=xmin+t*(xmax-xmin)/W),e>.5&&(ss=-t*(ymax-ymin)/H-ymin),ss}function zeichne(){ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1",ctx.arc(xm,ym,r,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),Line(xA,yA,0,0),Line(xB,yB,0,0),Line(xA,yA,xB,yB),ctx.strokeStyle="red",Line(xA,yA,xP,yP),Line(xB,yB,xP,yP),ctx.stroke();var e=BerechneWinkel(xA,yA,xB,yB,xP,yP),t=Math.round(18e3*e/Math.PI)/100;peripherie.innerHTML=t,zentri.innerHTML=2*t;var n=BerechnePhi(xB,yB);ctx.beginPath(),ctx.strokeStyle="black",0>yB?e<Math.PI/2?ctx.arc(xm,ym,20,2*Math.PI-n,2*Math.PI-WinkelA):ctx.arc(xm,ym,20,2*Math.PI-WinkelA,2*Math.PI-n):e>Math.PI/2?ctx.arc(xm,ym,20,2*Math.PI-n,2*Math.PI-WinkelA):ctx.arc(xm,ym,20,2*Math.PI-WinkelA,2*Math.PI-n),ctx.stroke(),ctx.font="14px Arial",ctx.fillText("A",map(0,xA)-10,map(1,yA)+10),ctx.fillText("B",map(0,xB),map(1,yB)+10),yP>0?ctx.fillText("P",map(0,xP)-10,map(1,yP)-3):ctx.fillText("P",map(0,xP)-10,map(1,yP)+12),ctx.fillText("M",map(0,0)-5,map(1,0)-5)}function dostep(){if(document.getElementById("VarB").checked){var e=BerechnePhi(xB,yB);e+=5*Math.PI/180,e>2*Math.PI&&(e-=2*Math.PI),xB=Math.cos(e),yB=Math.sin(e)}else{var e=BerechnePhi(xP,yP);e+=5*Math.PI/180,e>2*Math.PI&&(e-=2*Math.PI),xP=Math.cos(e),yP=Math.sin(e)}zeichne()}function getMousePos(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function f(e){return s=0,s=Math.sqrt(1-e*e)}function BerechnePhi(e,t){var n=Math.abs(Math.atan(t/e));return 0>e&&t>0&&(n=Math.PI-n),0>e&&0>t&&(n=Math.PI+n),e>0&&0>t&&(n=2*Math.PI-n),n}function BerechneWinkel(e,t,n,a,c,i){var x=Math.sqrt((n-e)*(n-e)+(a-t)*(a-t)),m=Math.sqrt((n-c)*(n-c)+(a-i)*(a-i)),h=Math.sqrt((e-c)*(e-c)+(t-i)*(t-i));return Hilf=0!=m&&0!=h&&0!=x?Math.acos((m*m+h*h-x*x)/2/m/h):0/0}var W,H;xmax=1.1,xmin=-xmax,ymax=xmax,ymin=-ymax;var xm,ym,r;xA=-1,yA=0,WinkelA=Math.PI;var xB=.8,yB=-f(xB),xP=-.2,yP=f(xP),canvas1,ctx,mousedown=!1,initmade=!1;window.onload=resizeCanvas;