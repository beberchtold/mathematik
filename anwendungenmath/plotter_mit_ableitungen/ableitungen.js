function resizeCanvas(){var e=document.getElementById("containercanvas");e.width=e.offsetWidth,W=e.width,H=W,initmade?(resize1(),zeichneKS(),zeichne_funktion(),document.getElementById("Abl1").checked&&zeichne_ableitung1(),document.getElementById("Abl2").checked&&zeichne_ableitung2()):init()}function ok1(){var hilf=document.getElementById("Xmin").value,check=pruefe_grenze(hilf);if(!check)return!1;if(Xmin=eval(hilf),isNaN(Xmin))return!1;hilf=document.getElementById("Xmax").value;var check=pruefe_grenze(hilf);if(!check)return!1;if(Xmax=eval(hilf),isNaN(Xmax))return!1;hilf=document.getElementById("Ymin").value;var check=pruefe_grenze(hilf);if(!check)return!1;if(Ymin=eval(hilf),isNaN(Ymin))return!1;hilf=document.getElementById("Ymax").value;var check=pruefe_grenze(hilf);return check?(Ymax=eval(hilf),isNaN(Ymax)?!1:(DiffX=Xmax-Xmin,0>=DiffX?!1:(DiffY=Ymax-Ymin,0>=DiffY?!1:!0))):!1}function pruefe_grenze(e){return e.split(",").length-1>0?!1:e.split(".").length-1>1?!1:e.length>2&&"-"==e.charAt(0)&&"0"==e.charAt(1)&&"."!=e.charAt(2)?!1:e.length>1&&"0"==e.charAt(0)&&"."!=e.charAt(1)?!1:!0}function f(x){return hilf=eval(term),isNaN(hilf)?1e5:hilf}function f1(e,t,n,r){return hilf=(r-n)/(t-e),1e5==n||1e5==r?1e5:hilf}function init(){initmade=!0,window.addEventListener("resize",function(){resizeCanvas()}),term="Math.sin(x)",canvas1=document.getElementById("myCanvas"),resize1(),ctx=canvas1.getContext("2d"),DiffX=Xmax-Xmin,DiffY=Ymax-Ymin,zeichneKS(),zeichne_funktion()}function resize1(){canvas1.width=W,canvas1.height=H}function zeichne(){if(ok1()){zeichneKS(),term=document.getElementById("f").value,ergaenze_term();var e=1.234567;try{{f(e)}}catch(t){return Fehlerbehandlung(),void 0}zeichne_funktion(),document.getElementById("Abl1").checked&&zeichne_ableitung1(),document.getElementById("Abl2").checked&&zeichne_ableitung2()}}function zeichneKS(){ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1",ctx.font="10px Arial";var e=row(0);ctx.moveTo(0,e),ctx.lineTo(W,e);var t=Math.floor(Xmin),n=Math.floor(Xmax),r=e,i=t;if(20>=DiffX)for(;n>=i;){var a=col(i);ctx.moveTo(a,r+3),ctx.lineTo(a,r-3),ctx.strokeText(i,a-3,r+10),i+=1}if(i=t+5-t%5,DiffX>20&&80>DiffX)for(;n>=i;){var a=col(i);ctx.moveTo(a,r+3),ctx.lineTo(a,r-3),ctx.strokeText(i,a-5,r+10),i+=5}ctx.moveTo(W-5,e-5),ctx.lineTo(W,e),ctx.moveTo(W-5,e+5),ctx.lineTo(W,e);var c=col(0);ctx.moveTo(c,0),ctx.lineTo(c,H);var o=Math.floor(Ymin),f=Math.floor(Ymax);a=c;var m=o;if(20>=DiffY)for(;f>=m;)0==m&&(m+=1),r=row(m),ctx.moveTo(a-3,r),ctx.lineTo(a+3,r),ctx.strokeText(m,a-12,r+3),m+=1;if(m=o+5-o%5,DiffY>20&&80>DiffY)for(;f>=m;)0==m&&(m+=5),r=row(m),ctx.moveTo(a-3,r),ctx.lineTo(a+3,r),ctx.strokeText(m,a-16,r+3),m+=5;ctx.moveTo(c-5,5),ctx.lineTo(c,0),ctx.moveTo(c+5,5),ctx.lineTo(c,0),ctx.stroke()}function zeichne_funktion(){ctx.beginPath(),ctx.strokeStyle="green";var e=f(Xmin),t=row(e);ctx.moveTo(0,t);for(var n=0;W>n;n++){var r=Xmin+DiffX/W*n,i=f(r);Math.abs(i-e)<DiffY/2&&1e5!=i?ctx.lineTo(n,row(i)):ctx.moveTo(n,row(i)),e=i}ctx.stroke()}function zeichne_ableitung1(){ctx.beginPath(),ctx.strokeStyle="red";for(var e=Xmin,t=f(e),n=1;W>n;n++){var r=Xmin+DiffX/W*n,i=f(r),a=f1(e,r,t,i);1==n?ctx.moveTo(1,row(a)):Math.abs(a-c)<DiffY/2&&1e5!=i?ctx.lineTo(n,row(a)):ctx.moveTo(n,row(a)),e=r,t=i;var c=a}ctx.stroke()}function zeichne_ableitung2(){ctx.beginPath(),ctx.strokeStyle="blue";for(var e=Xmin,t=f(e),n=0;1e5==t;)e+=DiffX/W,t=f(e),n++;var r=e+DiffX/W,i=f(r),a=f1(e,r,t,i);e=r,t=i;for(var c=n+1;W>c;){c++,r=e+DiffX/W,i=f(r);var o=f1(e,r,t,i),m=f1(e,r,a,o);c==n+2?ctx.moveTo(c,row(m)):Math.abs(m-l)<DiffY/2?ctx.lineTo(c,row(m)):ctx.moveTo(c,row(m)),e=r,t=i,a=o;var l=m}ctx.stroke()}function col(e){return(e-Xmin)/DiffX*W}function row(e){return(Ymax-e)/DiffY*H}function ergaenze_term(){term=term.replace(/asin/g,"hilfa"),term=term.replace(/acos/g,"hilfb"),term=term.replace(/atan/g,"hilfc"),term=term.replace(/sin/g,"Math.sin"),term=term.replace(/cos/g,"Math.cos"),term=term.replace(/tan/g,"Math.tan"),term=term.replace(/hilfa/g,"Math.asin"),term=term.replace(/hilfb/g,"Math.acos"),term=term.replace(/hilfc/g,"Math.atan"),term=term.replace(/abs/g,"Math.abs"),term=term.replace(/pow/g,"Math.pow"),term=term.replace(/sqrt/g,"Math.sqrt"),term=term.replace(/log/g,"Math.log"),term=term.replace(/ln/g,"Math.log"),term=term.replace(/exp/g,"Math.ixp"),term=term.replace(/e/g,"Math.E"),term=term.replace(/Math.ixp/g,"Math.exp"),term=term.replace(/pi/g,"Math.PI")}function Fehlerbehandlung(){alert("Fehler im Funktionsterm. Bitte korrigieren.")}var W,H,Xmin=-4.1,Xmax=4.1,Ymin=-2.1,Ymax=2.1,ctx,DiffX,DiffY,term,canvas1,initmade=!1;window.onload=resizeCanvas;