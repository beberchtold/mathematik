function init(){canvas1=document.getElementById("myCanvas"),ctx=canvas1.getContext("2d"),document.getElementById("parabel").checked=!0,canvas1.addEventListener("mousedown",function(){mousedown=!0},!1),canvas1.addEventListener("mouseup",function(){mousedown=!1},!1),canvas1.addEventListener("mousemove",function(t){if(mousedown){var e=getMousePos(canvas1,t),a=invmap(1,e.y);1==mode&&(yC=a,yC>yA&&(yC=yA),yB>yC&&(yC=yB),zeichne()),3==mode&&(yC=a,yC>yB&&(yC=yB),zeichne()),2==mode&&(yC=a,(yl+yF)/2>yC&&(yC=(yl+yF)/2),zeichne())}},!1),zeichne()}function OnChangeCheckbox0(t){t.checked&&(document.getElementById("parabel").checked=!1,document.getElementById("hyperbel").checked=!1,mode=1,yA=8,yB=-8,yC=2,anzahl=0,zeichne())}function OnChangeCheckbox1(t){t.checked&&(document.getElementById("ellipse").checked=!1,document.getElementById("hyperbel").checked=!1,mode=2,yC=2,anzahl=0,zeichne())}function OnChangeCheckbox2(t){t.checked&&(document.getElementById("ellipse").checked=!1,document.getElementById("parabel").checked=!1,mode=3,yC=-7,yA=8,yB=-1,anzahl=0,zeichne())}function Line(t,e,a,x){ctx.beginPath(),ctx.moveTo(map(0,t),map(1,e)),ctx.lineWidth="1",ctx.lineTo(map(0,a),map(1,x)),ctx.stroke()}function map(t,e){return s=2,.5>t&&(s=(e-xmin)/(xmax-xmin)*W),t>.5&&(s=(ymax-e)/(ymax-ymin)*H),s}function invmap(t,e){return ss=2,.5>t&&(ss=xmin+e*(xmax-xmin)/W),t>.5&&(ss=-e*(ymax-ymin)/H-ymin),ss}function zeichne(){if(ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.lineWidth="1",ctx.font="14px sans-serif",ctx.strokeStyle="#A0A0A0",Line(xC,ymin,xC,ymax),ctx.stroke(),ctx.fillText("C",map(0,xC)+2,map(1,yC)+14),ctx.beginPath(),ctx.strokeStyle="orange",ctx.arc(map(0,xC),map(1,yC),2,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.strokeStyle="black",1==mode||3==mode){ctx.fillText("A",map(0,xC)+2,map(1,yA)),ctx.fillText("B",map(0,xC)+2,map(1,yB)+8),Line(xC,yB,xC,yA),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,xF1),map(1,yF),2,0,2*Math.PI),ctx.stroke(),ctx.fillText("F1",map(0,xF1)-7,map(1,yF)+16),ctx.fillText("F2",map(0,xF2)-7,map(1,yF)+16),ctx.beginPath(),ctx.arc(map(0,xF2),map(1,yF),2,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.strokeStyle="green",r=Math.abs(yA-yC),r2=Math.abs(yC-yB),ctx.arc(map(0,xF1),map(1,yF),r*einheit,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,xF2),map(1,yF),r2*einheit,0,2*Math.PI),ctx.stroke(),xP1=(r*r-r2*r2-xF1*xF1+xF2*xF2)/2/(xF2-xF1),xP[anzahl]=xP1,yP1=Math.sqrt(r*r-(xP1-xF1)*(xP1-xF1)),yP[anzahl]=yP1,300>anzahl&&(anzahl+=1),ctx.strokeStyle="blue";for(var t=0;anzahl>t;t++)ctx.beginPath(),ctx.arc(map(0,xP[t]),map(1,yP[t]),1,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,xP[t]),map(1,-yP[t]),1,0,2*Math.PI),ctx.stroke(),3==mode&&(ctx.beginPath(),ctx.arc(map(0,-xP[t]),map(1,yP[t]),1,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,-xP[t]),map(1,-yP[t]),1,0,2*Math.PI),ctx.stroke());ctx.beginPath(),ctx.arc(map(0,xP1),map(1,yP1),2,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,xP1),map(1,-yP1),2,0,2*Math.PI),ctx.stroke(),3==mode&&(ctx.beginPath(),ctx.arc(map(0,-xP1),map(1,yP1),2,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,-xP1),map(1,-yP1),2,0,2*Math.PI),ctx.stroke())}if(2==mode){Line(xmin,yl,xmax,yl),Line(xC,(yl+yF)/2,xC,ymax),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,xF),map(1,yF),2,0,2*Math.PI),ctx.stroke(),ctx.fillText("F",map(0,xF)-5,map(1,yF)+16),ctx.fillText("l",W/2,map(1,yl)+14),ctx.beginPath(),ctx.strokeStyle="green",Line(xmin,yC,xmax,yC),ctx.stroke(),ctx.beginPath(),r=yC-yl,ctx.arc(map(0,xF),map(1,yF),r*einheit,0,2*Math.PI),ctx.stroke(),yP1=yC,yP[anzahl]=yP1,xP1=f(0,yP1),xP[anzahl]=xP1,300>anzahl&&(anzahl+=1),ctx.strokeStyle="blue";for(var t=0;anzahl>t;t++)ctx.beginPath(),ctx.arc(map(0,xP[t]),map(1,yP[t]),1,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,-xP[t]),map(1,yP[t]),1,0,2*Math.PI),ctx.stroke();ctx.beginPath(),ctx.arc(map(0,xP1),map(1,yP1),2,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,-xP1),map(1,yP1),2,0,2*Math.PI),ctx.stroke()}}function dostep(){2==mode&&(yC+=.5,yC>ymax&&(yC=(yl+yF)/2)),1==mode&&(ctx.beginPath(),ctx.strokeStyle="white",ctx.arc(map(0,xF1),map(1,yF),r*einheit,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,xF2),map(1,yF),r2*einheit,0,2*Math.PI),ctx.stroke(),yC+=.5,yC>yA&&(yC=yB+.5)),3==mode&&(ctx.beginPath(),ctx.strokeStyle="white",ctx.arc(map(0,xF1),map(1,yF),r*einheit,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.arc(map(0,xF2),map(1,yF),r2*einheit,0,2*Math.PI),ctx.stroke(),yC+=.5,yC>yB&&(yC=ymin)),zeichne()}function getMousePos(t,e){var a=t.getBoundingClientRect();return{x:e.clientX-a.left,y:e.clientY-a.top}}function f(t,e){return s=0,s=Math.sqrt(r*r-e*e)+t}function BerechneLaenge(t,e,a,x){var c=Math.sqrt((a-t)*(a-t)+(x-e)*(x-e));return c}W=320,H=W,xmax=10,xmin=-xmax,ymax=xmax,ymin=-ymax,einheit=W/(xmax-xmin),xF=0,yF=0,yl=-4,xF1=-6,xF2=-xF1;var yA,yB;xC=xmin+.5;var yC=2,r,r2,yP1,xP1;xP=new Array,yP=new Array;var anzahl=0,mode=2,canvas1,ctx,mousedown=!1;window.onload=init;