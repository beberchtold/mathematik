function resizeCanvas(){var e=document.getElementById("containercanvas");e.width=e.offsetWidth,W=e.width,H=W/2,initmade?(resize1(),zeichne()):init()}function f(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-e*e/2)}function calcintegral(e,t){for(var n=f(e)+f(t),a=0,i=0,m=(t-e)/100,r=1;100>r;r+=2)a+=f(e+r*m);for(r=2;100>r;r+=2)i+=f(e+r*m);var s=m/3*(n+4*a+2*i);return s>1&&(s=1),s}function berechne_u(e){var t,n=1e-4,a=e/2;t=.68>e?1:2;for(var i=calcintegral(0,t);Math.abs(a-i)>n;)a>i?t+=1e-4:t-=1e-4,i=calcintegral(0,t);return t}function xpixel(e,t,n){return Math.round(W/6/n*(e-t+3*n))}function ypixel(e){return H-20-Math.round(2*(H-20)*sigma*e)}function init(){initmade=!0,window.addEventListener("resize",function(){resizeCanvas()}),canvas1=document.getElementById("myCanvas"),resize1(),ctx=canvas1.getContext("2d"),rechne()}function resize1(){canvas1.width=W,canvas1.height=H}function rechne(){return document.getElementById("message").innerHTML=" ",""==document.getElementById("mue").value?(alert("Wert für mue eingeben!"),void 0):(mue=parseFloat(document.getElementById("mue").value),""==document.getElementById("sigma").value?(alert("Wert für sigma eingeben!"),void 0):(sigma=parseFloat(document.getElementById("sigma").value),0>=sigma?(alert("sigma muss grösser als 0 sein"),void 0):""==document.getElementById("a").value?(alert("Wert für a eingeben!"),void 0):(a=parseFloat(document.getElementById("a").value),mue-5*sigma>a&&(a=mue-5*sigma,document.getElementById("message").innerHTML="a wurde auf &mu;-5*&sigma; gesetzt<br>"),""==document.getElementById("b").value?(alert("Wert für b eingeben!"),void 0):(b=parseFloat(document.getElementById("b").value),a>=b?(alert("b muss grösser als a sein!"),void 0):(document.getElementById("b").value=b,b>mue+5*sigma&&(b=mue+5*sigma,document.getElementById("message").innerHTML+="b wurde auf &mu;+5*&sigma; gesetzt"),simpson=calcintegral((a-mue)/sigma,(b-mue)/sigma),schreibeWerte(),document.getElementById("RES").innerHTML="a) P("+a+"&le;X&le;"+b+") &asymp; "+runde(simpson),zeichne(),void 0)))))}function rechne_grenze(){if(document.getElementById("message").innerHTML=" ",""==document.getElementById("mue").value)return alert("Wert für mue eingeben!"),void 0;if(mue=parseFloat(document.getElementById("mue").value),""==document.getElementById("sigma").value)return alert("Wert für sigma eingeben!"),void 0;if(sigma=parseFloat(document.getElementById("sigma").value),0>=sigma)return alert("sigma muss grösser als 0 sein"),void 0;if(""==document.getElementById("wkeit").value)return alert("Wert für Wkeit eingeben!"),void 0;if(wkeit=parseFloat(document.getElementById("wkeit").value),0>wkeit||wkeit>1)return alert("Wkeit muss zwischen 0 und 1 sein"),void 0;var e=berechne_u(wkeit);a=mue-sigma*e,b=mue+sigma*e,simpson=calcintegral(-e,e),schreibeWerte(),document.getElementById("RES").innerHTML="b) P("+runde(a)+"&le;X&le;"+runde(b)+") &asymp; "+runde(simpson),zeichne()}function zeichne(){ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1",ctx.font="11px Arial",line(0,H-20,W,H-20);var e=W/120,t=sigma/20,n=-3*sigma,i=ypixel(1/sigma*f(n/sigma));ctx.moveTo(0,i);for(var m=1;120>=m;m++)n=-3*sigma+m*t,i=ypixel(1/sigma*f(n/sigma)),ctx.lineTo(m*e,i);for(m=0;12>m;m++){n=Math.round(mue-3*sigma+m*sigma/2);var r=xpixel(n,mue,sigma);ctx.fillText(n,r-6,H-8),line(r,H-18,r,H-20)}ctx.stroke();var s=xpixel(a,mue,sigma),u=xpixel(b,mue,sigma);if(W-3>s&&u>2)for(ctx.fillStyle="green",j=0,m=s;u>=m;m++)m>=0&&W>m&&(i=ypixel(1/sigma*f((a+6*j*sigma/W-mue)/sigma)),ctx.fillRect(m,i,1,H-21-i)),j++}function schreibeWerte(){var e=sigma*sigma;document.getElementById("MU").innerHTML=runde(mue),document.getElementById("SIGMA").innerHTML=runde(sigma),document.getElementById("VAR").innerHTML=runde(e)}function runde(e){return Math.round(1e5*e)/1e5}function line(e,t,n,a){ctx.moveTo(e,t),ctx.lineTo(n,a)}var W,H,mue=25,sigma=.2,a,b,wkeit,simpson,canvas1,initmade=!1;window.onload=resizeCanvas;