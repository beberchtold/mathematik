var W;var H;var abu;var abo;var n=100;var p=0.5;var alpha=5;var summez=false;var yfak=1;var mode=3;var modew=4;var ctx;var ctx2;var canvas1;var canvas2;var initmade=false;window.onload=resizeCanvas;function resizeCanvas(){var a=document.getElementById("containercanvas");a.width=a.offsetWidth;W=a.width;H=0.5*W;if(initmade){resize1();zeichne();zeichnen2()}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(a){resizeCanvas()});document.getElementById(mode).style.backgroundColor="#00FF00";document.getElementById(modew).style.backgroundColor="#00FF00";canvas1=document.getElementById("myCanvas");canvas2=document.getElementById("myCanvas2");canvas2.addEventListener("click",function(d){var c=getMousePos(canvas2,d);var a=c.x;var h=Math.floor((20*(a+W/40))/W);var g=h/20;document.getElementById("Pbeta").innerHTML=""+g;var e=1-f(n,g);if(e<=0.001){e=0}else{e=Math.round(10000*e)/100}document.getElementById("Beta").innerHTML=""+e+"%"},false);resize1();ctx=canvas1.getContext("2d");ctx2=canvas2.getContext("2d");zeichne();zeichnen2()}function resize1(){canvas1.width=W;canvas1.height=H;canvas2.width=W;canvas2.height=H}function button1(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode="1";document.getElementById(mode).style.backgroundColor="#00FF00";zeichne();document.getElementById("Pbeta").innerHTML="";document.getElementById("Beta").innerHTML="";zeichnen2()}function button2(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode="2";document.getElementById(mode).style.backgroundColor="#00FF00";zeichne();document.getElementById("Pbeta").innerHTML="";document.getElementById("Beta").innerHTML="";zeichnen2()}function button3(){document.getElementById(mode).style.backgroundColor="#E0FFFF";mode="3";document.getElementById(mode).style.backgroundColor="#00FF00";zeichne();document.getElementById("Pbeta").innerHTML="";document.getElementById("Beta").innerHTML="";zeichnen2()}function button4(){document.getElementById(modew).style.backgroundColor="#E0FFFF";modew="4";document.getElementById(modew).style.backgroundColor="#00FF00";summez=false;zeichne()}function button5(){document.getElementById(modew).style.backgroundColor="#E0FFFF";modew="5";document.getElementById(modew).style.backgroundColor="#00FF00";summez=true;yfak=1;zeichne()}function button6(){document.getElementById(modew).style.backgroundColor="#E0FFFF";modew="6";document.getElementById(modew).style.backgroundColor="#00FF00";summez=true;yfak=10;zeichne()}function einlesen(){p=document.getElementById("p0").value;if(p<0){p=0}if(p>1){p=1}n=parseInt(document.getElementById("Anz").value);if(n<1){p=1}if(n>300){n=300}alpha=document.getElementById("Sniveau").value;if(alpha<0.5){alpha=0.5}if(alpha>8.5){alpha=8.5}summez=(modew==5);document.getElementById("Pbeta").innerHTML="";document.getElementById("Beta").innerHTML="";zeichne();zeichnen2()}function zeichne(){ctx.clearRect(0,0,W,H);ctx.beginPath();ctx.strokeStyle="gray";ctx.rect(0,0,W-1,H-1);ctx.stroke();axen(n,p,summez,yfak);if(mode==1){linkss(W,H,n,summez,p,alpha/100,yfak)}if(mode==2){rechtss(W,H,n,summez,p,alpha/100,yfak)}if(mode==3){zweis(W,H,n,summez,p,alpha/100,yfak)}}function comb(e,a){var d=1;if(a>e){d=0}else{if(a==0){d=1}else{for(var c=1;c<=a;c++){d=(d*((e+1)-c))/c}}}return d}function b(e,a,d){var c=comb(e,a)*Math.pow(d,a)*Math.pow(1-d,e-a);return c}function linkss(g,t,d,r,c,s,e){var o=false;var u=0;var m=Math.floor(d*c);var j=b(d,m,c);for(var l=0;l<=d;l++){ctx.beginPath();var q;if(u<0.9999){q=b(d,l,c)}else{q=0}u+=q;if(u<=s){ctx.strokeStyle="red"}else{if(!o){o=true;abu=l;abo=d;document.getElementById("VerB").innerHTML="{0 .. "+(l-1)+"}";var k=Math.ceil(100000*(u-q))/1000;document.getElementById("Alpha").innerHTML=""+k+"%"}ctx.strokeStyle="blue"}zeichnen(g,t,l,d,r,u,q,e,j);ctx.stroke()}if(r){ctx.beginPath();ctx.strokeStyle="magenta";var h=t-Math.floor((0.05+s*0.9*e)*t);line(0,h,g-1,h);ctx.stroke()}}function rechtss(g,t,d,r,c,s,e){var o=false;var u=0;var m=Math.floor(d*c);var j=b(d,m,c);for(var l=d;l>=0;l--){ctx.beginPath();var q;if(u<0.9999){q=b(d,l,c)}else{q=0}u+=q;if(u<=s){ctx.strokeStyle="red"}else{if(!o){o=true;abu=0;abo=l;document.getElementById("VerB").innerHTML="{"+(l+1)+" .. "+d+"}";var k=Math.ceil(100000*(u-q))/1000;document.getElementById("Alpha").innerHTML=""+k+"%"}ctx.strokeStyle="blue"}zeichnen(g,t,l,d,r,u,q,e,j);ctx.stroke()}if(r){ctx.beginPath();ctx.strokeStyle="magenta";var h=t-Math.floor((0.05+s*0.9*e)*t);line(0,h,g-1,h);ctx.stroke()}}function zweis(c,k,r,l,o,y,d){var s="";var h=0;var j=false;var q=0;var g=Math.floor(r*o);var u=b(r,g,o);for(var t=0;t<=g;t++){ctx.beginPath();var w;if(q<0.9999){w=b(r,t,o)}else{w=0}q+=w;if(q<=y/2){ctx.strokeStyle="red"}else{if(!j){j=true;abu=t;s="{0.."+(t-1)+"}";h=q-w}ctx.strokeStyle="blue"}zeichnen(c,k,t,r,l,q,w,d,u);ctx.stroke()}var v=0;j=false;for(var t=r;t>g;t--){ctx.beginPath();var w;if(v<0.9999){w=b(r,t,o)}else{w=0}v+=w;if(v<=y/2){ctx.strokeStyle="red"}else{if(!j){j=true;abo=t;document.getElementById("VerB").innerHTML=s+" & {"+(t+1)+".."+r+"}";var e=Math.ceil(100000*((h+v)-w))/1000;document.getElementById("Alpha").innerHTML=""+e+"%"}ctx.strokeStyle="blue"}zeichnen(c,k,t,r,l,v,w,d,u);ctx.stroke()}if(l){ctx.beginPath();ctx.strokeStyle="magenta";var x=k-(0.05+y*0.45*d)*k;line(0,x,c-1,x);ctx.stroke();ctx.beginPath();var m=(r*o*c)/r;ctx.strokeStyle="green";line(m,1,m,k-1);ctx.stroke()}}function zeichnen(d,m,g,a,j,o,k,c,l){var h=(g*d)/a;if(j){var e=(0.05+o*0.9*c)*m;ctx.beginPath();ctx.arc(h-1,m-e-1,1,0,2*Math.PI);ctx.stroke()}else{var e=(k*0.9*m)/l;line(h,0.95*m,h,0.95*m-e)}}function line(c,e,a,d){ctx.moveTo(c,e);ctx.lineTo(a,d)}function line2(c,e,a,d){ctx2.moveTo(c,e);ctx2.lineTo(a,d)}function axen(d,a,l,j){ctx.font="12px Arial";ctx.beginPath();var c=1;var e=b(d,Math.floor(d*a),a);if(l){c=1/j}else{c=Math.ceil(1000*e)/1000}ctx.strokeStyle="gray";var g=Math.floor(0.05*H);line(0,g,4,g);ctx.fillText(""+c,6,g+8);g=(0.5*H);line(0,g,4,g);ctx.fillText(""+c/2,6,g+4);g=(0.95*H);line(0,g,4,g);ctx.fillText("0",6,g);var h=1;do{var k=(0.25*h*W);line(k,H-5,k,H);ctx.fillText(""+(h*0.25*d),k-8,H-10)}while(++h<4);ctx.fillText(""+d,W-20,H-10);ctx.stroke()}function axen2(){ctx2.font="12px Arial";ctx2.fillStyle="black";ctx2.beginPath();ctx2.strokeStyle="gray";var c=0.05*H;line2(0,c,4,c);ctx2.fillText("1.0",6,c+8);c=0.5*H;line2(0,c,4,c);ctx2.fillText("0.5",6,c+4);c=0.95*H;line2(0,c,4,c);ctx2.fillText("0",6,c);var d=1;do{var a=0.25*d*W;line2(a,H-5,a,H);ctx2.fillText(""+d*0.25,a-8,H-6)}while(++d<4);ctx2.fillText("1",W-8,H-6);ctx2.stroke()}function f(e,d){var a=0;for(var c=0;c<abu;c++){a+=b(e,c,d)}for(var c=abo+1;c<=e;c++){a+=b(e,c,d)}return a}function zeichnen2(){ctx2.clearRect(0,0,W,H);ctx2.beginPath();ctx2.strokeStyle="gray";ctx2.rect(0,0,W-1,H-1);ctx2.stroke();axen2();var a=0;ctx2.fillStyle="rgb(180,0,0)";var c=0.05;var d=0.05;for(;c<=1;c+=d){yk=(0.05+(1-f(n,c))*0.9)*H;xk=c*W;ctx2.rect(xk-1,H-1-yk,3,3);ctx2.fill()}}function getMousePos(c,a){var d=c.getBoundingClientRect();return{x:a.clientX-d.left,y:a.clientY-d.top}};