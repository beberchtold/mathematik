var W,H;var m,r,n,a,b,mue,sigma;var wkeit=new Array();var summe;var canvas1;var initmade=false;window.onload=resizeCanvas;function resizeCanvas(){var c=document.getElementById("containercanvas");c.width=c.offsetWidth;W=c.width;H=W/2;if(initmade){resize1();if(n<=30){zeichne()}}else{init()}}function Bikoeff(c,f){var e;if(f>c){e=0}else{e=1}if(f>c-f){f=c-f}for(var d=1;d<=f;d++){e=e*(c-d+1)/d}return e}function calcwk(c,e,f){var d=Bikoeff(c,f);for(x=0;x<=f;x++){wkeit[x]=Bikoeff(e,x)*Bikoeff(c-e,f-x)/d}}function init(){initmade=true;window.addEventListener("resize",function(c){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");rechne()}function resize1(){canvas1.width=W;canvas1.height=H}function rechne(){if(document.getElementById("m").value==""){alert("Wert für n eingeben!");return}m=parseInt(document.getElementById("m").value);if((m<=1)||(isNaN(m))){alert("falscher Wert für m");return}if(document.getElementById("r").value==""){alert("Wert für r eingeben!");return}r=parseInt(document.getElementById("r").value);if((r<=0)||(r>m)||(isNaN(r))){alert("falscher Wert für r");return}if(document.getElementById("n").value==""){alert("Wert für n eingeben!");return}n=parseInt(document.getElementById("n").value);if((n<=0)||(n>m)||(isNaN(n))){alert("falscher Wert für n");return}if(document.getElementById("a").value==""){alert("Wert für a eingeben!");return}a=parseInt(document.getElementById("a").value);if((a<0)||isNaN(a)||(a>n)||(a>r)){alert("falscher Wert für a");return}if(document.getElementById("b").value==""){alert("Wert für b eingeben!");return}b=parseInt(document.getElementById("b").value);if((isNaN(b))||(b>n)||(b<a)||(b>r)){alert("falscher Wert für b");return}summe=0;calcwk(m,r,n);for(var c=a;c<=b;c++){summe+=wkeit[c]}mue=n*r/m;sigma=Math.sqrt(n*r/m*(1-r/m)*(m-n)/(m-1));schreibeWerte();if(n<=30){zeichne()}else{ctx.clearRect(0,0,W,H)}}function zeichne(){ctx.clearRect(0,0,W,H);ctx.font="11px Arial";var d=W/(n+1);for(var c=0;c<=n;c++){if((c<a)||(c>b)){ctx.fillStyle="rgb(10,36,106)"}else{ctx.fillStyle="green"}ctx.fillRect(c*d,(H-20)*(1-2.5*wkeit[c]),d,(H-20)*2.5*wkeit[c]);ctx.fillText(c,c*d+d/2,H-5)}}function schreibeWerte(){var c=sigma*sigma;document.getElementById("M").innerHTML=m;document.getElementById("N").innerHTML=n;document.getElementById("R").innerHTML=r;document.getElementById("A").innerHTML=a;document.getElementById("B").innerHTML=b;document.getElementById("MU").innerHTML=runde(mue);document.getElementById("VAR").innerHTML=runde(c);document.getElementById("SIGMA").innerHTML=runde(sigma);document.getElementById("RESHY").innerHTML=Math.round(100000000*summe)/100000000}function runde(c){return Math.round(100000*c)/100000};