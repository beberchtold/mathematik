function resizeCanvas(){var e=document.getElementById("containercanvas");e.width=e.offsetWidth,W=e.width,W>400&&(W=400),H=W,initmade?(resize1(),document.getElementById("LPunkt").checked&&zeichnelpunkt(),document.getElementById("RPunkt").checked&&zeichnerpunkt(),document.getElementById("Trapez").checked&&zeichnetrapez(),document.getElementById("MPunkt").checked&&zeichnempunkt(),zeichneKS(),zeichne_funktion()):init()}function ok1(){var hilf=document.getElementById("Xmin").value,check=pruefe_grenze(hilf);if(!check)return!1;if(Xmin=eval(hilf),isNaN(Xmin))return!1;hilf=document.getElementById("Xmax").value;var check=pruefe_grenze(hilf);return check?(Xmax=eval(hilf),isNaN(Xmax)?!1:(DiffX=Xmax-Xmin,0>=DiffX?!1:!0)):!1}function pruefe_grenze(e){return e.split(",").length-1>0?!1:e.split(".").length-1>1?!1:e.length>2&&"-"==e.charAt(0)&&"0"==e.charAt(1)&&"."!=e.charAt(2)?!1:e.length>1&&"0"==e.charAt(0)&&"."!=e.charAt(1)?!1:!0}function f(x){return hilf=eval(term)}function init(){initmade=!0,window.addEventListener("resize",function(){resizeCanvas()}),canvas1=document.getElementById("myCanvas"),resize1(),ctx=canvas1.getContext("2d"),document.getElementById("Trapez").checked=!0,reset()}function resize1(){canvas1.width=W,canvas1.height=H}function reset(){nint=document.getElementById("Anz").value,1>nint&&(nint=1),nint>2e3&&(nint=2e3),document.getElementById("Anz").value=nint,document.getElementById("simpson").innerHTML="",leereResultate(),term=document.getElementById("f").value,ergaenze_term();try{{f(Xmin)}}catch(e){return Fehlerbehandlung(),void 0}if(!ok1())return alert("Fehler bei Grenzen KS!"),void 0;BerechneYGrenzen(),ctx.clearRect(0,0,W,H),Berechne_x_y(),reslpunkt=runde(leftpoint()),document.getElementById("LPunkt").checked&&(document.getElementById("lpunkt").style.color="red",zeichnelpunkt()),resrpunkt=runde(rightpoint()),document.getElementById("RPunkt").checked&&(document.getElementById("rpunkt").style.color="red",zeichnerpunkt()),restrapez=runde(trapez()),document.getElementById("Trapez").checked&&(document.getElementById("trapez").style.color="red",zeichnetrapez()),resmpunkt=runde(midpoint()),document.getElementById("MPunkt").checked&&(document.getElementById("mpunkt").style.color="red",zeichnempunkt());var t=runde(simpson());document.getElementById("simpson").innerHTML=t,document.getElementById("trapez").innerHTML=restrapez,document.getElementById("lpunkt").innerHTML=reslpunkt,document.getElementById("rpunkt").innerHTML=resrpunkt,document.getElementById("mpunkt").innerHTML=resmpunkt,zeichneKS(),zeichne_funktion()}function OnChangeCheckbox1(){document.getElementById("Trapez").checked=!0,document.getElementById("LPunkt").checked=!1,document.getElementById("RPunkt").checked=!1,document.getElementById("MPunkt").checked=!1,leereResultate(),document.getElementById("trapez").style.color="red",document.getElementById("trapez").innerHTML=restrapez,document.getElementById("lpunkt").innerHTML=reslpunkt,document.getElementById("rpunkt").innerHTML=resrpunkt,document.getElementById("mpunkt").innerHTML=resmpunkt,ctx.clearRect(0,0,W,H),zeichnetrapez(),zeichneKS(),zeichne_funktion()}function OnChangeCheckbox2(){document.getElementById("LPunkt").checked=!0,document.getElementById("Trapez").checked=!1,document.getElementById("RPunkt").checked=!1,document.getElementById("MPunkt").checked=!1,leereResultate(),document.getElementById("lpunkt").style.color="red",document.getElementById("lpunkt").innerHTML=reslpunkt,document.getElementById("rpunkt").innerHTML=resrpunkt,document.getElementById("trapez").innerHTML=restrapez,document.getElementById("mpunkt").innerHTML=resmpunkt,ctx.clearRect(0,0,W,H),zeichnelpunkt(),zeichneKS(),zeichne_funktion()}function OnChangeCheckbox3(){document.getElementById("RPunkt").checked=!0,document.getElementById("Trapez").checked=!1,document.getElementById("LPunkt").checked=!1,document.getElementById("MPunkt").checked=!1,leereResultate(),document.getElementById("rpunkt").style.color="red",document.getElementById("rpunkt").innerHTML=resrpunkt,document.getElementById("lpunkt").innerHTML=reslpunkt,document.getElementById("trapez").innerHTML=restrapez,document.getElementById("mpunkt").innerHTML=resmpunkt,ctx.clearRect(0,0,W,H),zeichnerpunkt(),zeichneKS(),zeichne_funktion()}function OnChangeCheckbox4(){document.getElementById("MPunkt").checked=!0,document.getElementById("RPunkt").checked=!1,document.getElementById("Trapez").checked=!1,document.getElementById("LPunkt").checked=!1,leereResultate(),document.getElementById("mpunkt").style.color="red",document.getElementById("rpunkt").innerHTML=resrpunkt,document.getElementById("lpunkt").innerHTML=reslpunkt,document.getElementById("trapez").innerHTML=restrapez,document.getElementById("mpunkt").innerHTML=resmpunkt,ctx.clearRect(0,0,W,H),zeichnempunkt(),zeichneKS(),zeichne_funktion()}function leftpoint(){for(var e=0,t=DiffX/nint,n=0;nint>n;n++)e+=t*y[n];return e}function rightpoint(){for(var e=0,t=DiffX/nint,n=1;nint>=n;n++)e+=t*y[n];return e}function midpoint(){for(var e=0,t=DiffX/nint,n=0;nint>n;n++)e+=t*ym[n];return e}function trapez(){for(var e=0,t=DiffX/nint,n=0;nint>n;n++)e+=t*(y[n]+y[n+1])/2;return e}function simpson(){var e=0;if(nint%2==0){for(var t=DiffX/nint,n=0;nint>n;n+=2)e+=t*(y[n]+4*y[n+1]+y[n+2])/3;return e}}function zeichneKS(){ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1",ctx.font="10px Arial";var e=row(0);ctx.moveTo(0,e),ctx.lineTo(W,e);var t=Math.floor(Xmin),n=Math.floor(Xmax),r=e,c=t;if(20>=DiffX)for(;n>=c;){var i=col(c);ctx.moveTo(i,r+3),ctx.lineTo(i,r-3),ctx.strokeText(c,i-3,r+10),c+=1}if(c=t+5-t%5,DiffX>20&&80>DiffX)for(;n>=c;){var i=col(c);ctx.moveTo(i,r+3),ctx.lineTo(i,r-3),ctx.strokeText(c,i-5,r+10),c+=5}ctx.moveTo(W-5,e-5),ctx.lineTo(W,e),ctx.moveTo(W-5,e+5),ctx.lineTo(W,e);var m=col(0);ctx.moveTo(m,0),ctx.lineTo(m,H);var o=Math.floor(Ymin),l=Math.floor(Ymax);i=m;var a=o;if(20>=DiffY)for(;l>=a;)0==a&&(a+=1),r=row(a),ctx.moveTo(i-3,r),ctx.lineTo(i+3,r),ctx.strokeText(a,i-12,r+3),a+=1;if(a=o+5-o%5,DiffY>20&&80>DiffY)for(;l>=a;)0==a&&(a+=5),r=row(a),ctx.moveTo(i-3,r),ctx.lineTo(i+3,r),ctx.strokeText(a,i-16,r+3),a+=5;ctx.moveTo(m-5,5),ctx.lineTo(m,0),ctx.moveTo(m+5,5),ctx.lineTo(m,0),ctx.stroke()}function zeichne_funktion(){ctx.beginPath(),ctx.strokeStyle="green";for(var e=Xmin,t=DiffX/W;isNaN(f(e));)e+=t;var n=f(e),r=row(n),c=col(e);ctx.moveTo(c,r);for(var i=c+1;W>i;i++){e=Xmin+DiffX/W*i;var m=f(e);Math.abs(m-n)<DiffY/2&&!isNaN(m)?ctx.lineTo(i,row(m)):ctx.moveTo(i,row(m)),n=m}ctx.stroke()}function zeichnelpunkt(){var e=W/nint;1>e&&(e=1);var t=row(0);t>H&&(t=H),ctx.beginPath(),ctx.fillStyle="#F06060";for(var n=0;nint>n;n++){var r=row(y[n]);ctx.rect(col(x[n]),r,e,t-r),ctx.fill()}}function zeichnerpunkt(){var e=W/nint;1>e&&(e=1);var t=row(0);t>H&&(t=H),ctx.beginPath(),ctx.fillStyle="#F06060";for(var n=0;nint>n;n++){var r=row(y[n+1]);ctx.rect(col(x[n]),r,e,t-r),ctx.fill()}}function zeichnempunkt(){var e=W/nint;1>e&&(e=1);var t=row(0);t>H&&(t=H),ctx.beginPath(),ctx.fillStyle="#F06060";for(var n=0;nint>n;n++){var r=row(ym[n]);ctx.rect(col(x[n]),r,e,t-r),ctx.fill()}}function zeichnetrapez(){if(nint>W)return zeichnelpunkt(),void 0;var e=row(0);e>H&&(e=H),ctx.fillStyle="#F06060";for(var t=0;nint>t;t++){ctx.beginPath();var n=col(x[t]),r=row(y[t]);0>r&&(r=0),r>H&&(r=H);var c=col(x[t+1]);ctx.moveTo(n,e),ctx.lineTo(n,r),ctx.lineTo(c,row(y[t+1])),ctx.lineTo(c,e),ctx.fill()}}function Berechne_x_y(){var e=DiffX/nint;x[nint]=Xmax,y[nint]=f(Xmax);for(var t=0;nint>t;t++)x[t]=Xmin+t*e,y[t]=f(x[t]),ym[t]=f(Xmin+e/2+t*e)}function BerechneYGrenzen(){for(var e=Xmin,t=DiffX/100;isNaN(f(e));)e+=t;for(Ymin=f(e),Ymax=Ymin;Xmax>=e+t;){e+=t;var n=f(e);!isNaN(n)&&Ymin>n&&(Ymin=n),!isNaN(n)&&n>Ymax&&(Ymax=n)}DiffY=Ymax-Ymin,50>DiffY&&(Ymin-=.1*DiffY,Ymax+=.1*DiffY),Ymax>50&&(Ymax=50),-50>Ymin&&(Ymin=-50),DiffY=Ymax-Ymin}function col(e){return(e-Xmin)/DiffX*W}function row(e){return(Ymax-e)/DiffY*H}function runde(e){return Math.round(1e6*e)/1e6}function ergaenze_term(){term=term.replace(/asin/g,"hilfa"),term=term.replace(/acos/g,"hilfb"),term=term.replace(/atan/g,"hilfc"),term=term.replace(/sin/g,"Math.sin"),term=term.replace(/cos/g,"Math.cos"),term=term.replace(/tan/g,"Math.tan"),term=term.replace(/hilfa/g,"Math.asin"),term=term.replace(/hilfb/g,"Math.acos"),term=term.replace(/hilfc/g,"Math.atan"),term=term.replace(/abs/g,"Math.abs"),term=term.replace(/pow/g,"Math.pow"),term=term.replace(/sqrt/g,"Math.sqrt"),term=term.replace(/log/g,"Math.log"),term=term.replace(/ln/g,"Math.log"),term=term.replace(/exp/g,"Math.ixp"),term=term.replace(/e/g,"Math.E"),term=term.replace(/Math.ixp/g,"Math.exp"),term=term.replace(/pi/g,"Math.PI")}function leereResultate(){document.getElementById("trapez").style.color="black",document.getElementById("lpunkt").style.color="black",document.getElementById("rpunkt").style.color="black",document.getElementById("mpunkt").style.color="black",document.getElementById("trapez").innerHTML="",document.getElementById("lpunkt").innerHTML="",document.getElementById("rpunkt").innerHTML="",document.getElementById("mpunkt").innerHTML=""}function Fehlerbehandlung(){alert("Fehler im Funktionsterm. Bitte korrigieren.")}var W,H,Xmin,Xmax,Ymin,Ymax,ctx,DiffX,DiffY,term,x=new Array,y=new Array,ym=new Array,nint,reslpunkt,resrpunkt,resmpunkt,restrapez,canvas1,initmade=!1;window.onload=resizeCanvas;