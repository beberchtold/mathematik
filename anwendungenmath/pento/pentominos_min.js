function init(){var e=document.getElementById("myCanvas");ctx=e.getContext("2d"),W=e.width-1,B=e.height-1;for(var t=0;100>t;t++)board[t]=-1;for(t=1;11>t;t++)for(var s=1;7>s;s++)board[12*s+t]=0;MakeColors(),zeichne();for(var t=0;63>t;t++)pieces[t]=new Array(5);pieces[0]=[2,11,12,13,24],pieces[1]=[1,1,2,3,4],pieces[2]=[1,12,24,36,48],pieces[3]=[3,1,12,23,24],pieces[4]=[3,12,13,14,26],pieces[5]=[3,1,13,25,26],pieces[6]=[3,10,11,12,22],pieces[7]=[4,12,24,25,26],pieces[8]=[4,1,2,12,24],pieces[9]=[4,12,22,23,24],pieces[10]=[4,1,2,14,26],pieces[11]=[5,1,2,13,25],pieces[12]=[5,10,11,12,24],pieces[13]=[5,12,23,24,25],pieces[14]=[5,12,13,14,24],pieces[15]=[6,12,13,25,26],pieces[16]=[6,11,12,22,23],pieces[17]=[6,1,13,14,26],pieces[18]=[6,1,11,12,23],pieces[19]=[7,1,2,12,14],pieces[20]=[7,1,13,24,25],pieces[21]=[7,2,12,13,14],pieces[22]=[7,1,12,24,25],pieces[23]=[8,12,13,14,15],pieces[24]=[8,12,24,35,36],pieces[25]=[8,1,2,3,15],pieces[26]=[8,1,12,24,36],pieces[27]=[8,1,13,25,37],pieces[28]=[8,1,2,3,12],pieces[29]=[8,12,24,36,37],pieces[30]=[8,9,10,11,12],pieces[31]=[9,1,10,11,12],pieces[32]=[9,12,13,25,37],pieces[33]=[9,1,2,11,12],pieces[34]=[9,12,24,25,37],pieces[35]=[9,1,13,14,15],pieces[36]=[9,12,23,24,35],pieces[37]=[9,1,2,14,15],pieces[38]=[9,11,12,23,35],pieces[39]=[10,10,11,12,13],pieces[40]=[10,11,12,24,36],pieces[41]=[10,1,2,3,13],pieces[42]=[10,12,24,25,36],pieces[43]=[10,1,2,3,14],pieces[44]=[10,12,13,24,36],pieces[45]=[10,11,12,13,14],pieces[46]=[10,12,23,24,36],pieces[47]=[11,11,12,13,25],pieces[48]=[11,1,11,12,24],pieces[49]=[11,12,13,14,25],pieces[50]=[11,12,13,23,24],pieces[51]=[11,10,11,12,23],pieces[52]=[11,1,13,14,25],pieces[53]=[11,11,12,13,23],pieces[54]=[11,11,12,24,25],pieces[55]=[12,1,12,13,25],pieces[56]=[12,1,2,12,13],pieces[57]=[12,12,13,24,25],pieces[58]=[12,1,11,12,13],pieces[59]=[12,1,12,13,14],pieces[60]=[12,11,12,23,24],pieces[61]=[12,1,2,13,14],pieces[62]=[12,1,12,13,24]}function zeichne(){ctx.clearRect(0,0,W,B);var e=Math.floor(W/10),t=10*e,s=Math.floor(B/6),c=6*s;ctx.beginPath();for(var a=0;10>=a;a++)ctx.moveTo(1+a*e,0),ctx.lineTo(1+a*e,c);for(var i=0;6>=i;i++)ctx.moveTo(0,i*s),ctx.lineTo(t,i*s);ctx.stroke()}function Start(){for(i=1;11>i;i++)for(var j=1;7>j;j++)board[12*j+i]=0;for(i=0;13>i;i++)aktp[i]=1,aktsquare[i]=0;for(i=1;12>=i;i++)used[i]=!1;switch(zeichne(),document.getElementById("pauseBttn").onclick=function(){pause=!0,document.getElementById("stepBttn").disabled=!1,document.getElementById("goBttn").disabled=!1,document.getElementById("startBttn").disabled=!1},document.getElementById("stepBttn").disabled=!1,document.getElementById("goBttn").disabled=!1,document.getElementById("label1").firstChild.data="Klicken Sie auf Step oder Go",document.getElementById("label").firstChild.data="Anzahl Lösungen: 0",startpos=eval(document.getElementById("Startpos").value)){case 15:endeanzahl=389;break;case 16:endeanzahl=342;break;case 17:endeanzahl=291;break;case 26:endeanzahl=442;break;case 27:endeanzahl=262;break;case 28:endeanzahl=276;break;case 29:endeanzahl=337}anzahl=0,square=13,stopped=!1,success=!1,fromstart=!0,playPiece(0,startpos),numused=1}function NeueStellung(){for(var e=aktp[numused+1];63>e&&!success;)0==used[pieces[e][0]]&&putPiece(e,square)?(numused++,success=!0,aktp[numused]=e,aktsquare[numused]=square,used[pieces[e][0]]=!0,playPiece(e,square),12==numused&&(document.getElementById("haltlos").checked||(document.getElementById("stepBttn").disabled=!1,document.getElementById("goBttn").disabled=!1,document.getElementById("pauseBttn").disabled=!0,document.getElementById("startBttn").disabled=!1,stopped=!0,document.getElementById("label1").firstChild.data="Klicken Sie auf Step oder Go"),anzahl++,document.getElementById("label").firstChild.data="Lösung "+anzahl+" gefunden!")):e++}function run(){stopped||pause||!Weiter||(Weiter=!1,12==numused&&success&&(success=!1),timer=setTimeout(function(){step()},delay)),pause&&(document.getElementById("label1").firstChild.data="Pause. Für Weiter klicken Sie auf Step oder Go."),anzahl==endeanzahl&&(document.getElementById("label").firstChild.data="Ende: Anzahl Lösungen: "+endeanzahl,stopped=!0,document.getElementById("stepBttn").disabled=!1,document.getElementById("goBttn").disabled=!1,document.getElementById("pauseBttn").disabled=!0,document.getElementById("startBttn").disabled=!1)}function step(){if(delay=document.getElementById("Delay").value,12>numused&&success){for(success=!1,entfernt&&(entfernt=!1,aktp[numused+1]=1);0!=board[square];)square++;NeueStellung()}success||(entfernt&&(aktp[numused+1]=1),removePiece(aktp[numused],aktsquare[numused]),used[pieces[aktp[numused]][0]]=!1,square=aktsquare[numused],aktp[numused]++,numused--,entfernt=!0,NeueStellung()),schrittweise||(Weiter=!0,clearTimeout(timer),run())}function doStep(){schrittweise=!0,stopped&&(stopped=!1,success=!1),fromstart&&(fromstart=!1,success=!0),step()}function doGo(){document.getElementById("startBttn").disabled=!0,document.getElementById("pauseBttn").disabled=!1,document.getElementById("stepBttn").disabled=!0,document.getElementById("goBttn").disabled=!0,success=!1,schrittweise=!1,fromstart&&(fromstart=!1,success=!0),pause=!1,document.getElementById("label1").firstChild.data="Ich rechne...",stopped=!1,run()}function putPiece(e,t){if(0!=board[t])return!1;for(var s=1;4>=s;s++)if(0!=board[t+pieces[e][s]])return!1;return!0}function putSquare(e,t){var s=Math.floor(W/10),c=Math.floor(B/6),a=(t%12-1)*s,i=Math.floor(t/12-1)*c;ctx.fillStyle=pieceColor[e],ctx.fillRect(a+1,i+1,s-1,c-1),board[t]=e}function playPiece(e,t){putSquare(pieces[e][0],t);for(var s=1;5>s;s++)putSquare(pieces[e][0],t+pieces[e][s])}function clearSquare(e){var t=Math.floor(W/10),s=Math.floor(B/6),c=(e%12-1)*t,a=Math.floor(e/12-1)*s;ctx.fillStyle=pieceColor[0],ctx.fillRect(c+1,a+1,t-1,s-1),board[e]=0}function removePiece(e,t){clearSquare(t);for(var s=1;5>s;s++)clearSquare(t+pieces[e][s])}function MakeColors(){pieceColor[0]="white",pieceColor[1]="#C80000",pieceColor[2]="#9696FF",pieceColor[3]="#00C8C8",pieceColor[4]="#FF96FF",pieceColor[5]="#00C800",pieceColor[6]="#96FFFF",pieceColor[7]="#C8C800",pieceColor[8]="#0000C8",pieceColor[9]="#FF9696",pieceColor[10]="#C800C8",pieceColor[11]="#FFFF96",pieceColor[12]="#96FF96"}var W,B,ctx,board=new Array(100),pieceColor=new Array(13),pieces=new Array(63),used=new Array,startpos,numused,anzahl,endeanzahl,fromstart=!0,stopped=!1,pause=!1,square,success=!1,aktp=new Array(13),aktsquare=new Array(13),entfernt=!1,schrittweise=!0,timer,delay=100,Weiter=!0;window.onload=init;