function resizeCanvas(){var e=document.getElementById("containercanvas");e.width=e.offsetWidth,W=e.width,W>400&&(W=400),H=.9375*W,initmade?(resize1(),zeichne()):init()}function init(){initmade=!0,window.addEventListener("resize",function(){resizeCanvas()}),canvas1=document.getElementById("myCanvas"),resize1(),ctx=canvas1.getContext("2d"),py=f(px),qy=f(qx),document.getElementById("x0").checked=!0,document.getElementById("links").checked=!0,canvas1.addEventListener("mousedown",function(){mousedown=!0},!1),canvas1.addEventListener("mouseup",function(){mousedown=!1},!1),canvas1.addEventListener("mousemove",function(e){if(mousedown){var x=getMousePos(canvas1,e);document.getElementById("links").checked&&(px=invmap(0,x.x),document.getElementById("x0").checked&px>=x0&&(px=x0),document.getElementById("x1").checked&px>=x1&&(px=x1),xmin>=px&&(px=xmin),py=f(px),zeichne()),document.getElementById("rechts").checked&&(qx=invmap(0,x.x),qx>=xmax&&(qx=xmax),document.getElementById("x0").checked&x0>=qx&&(qx=x0),document.getElementById("x1").checked&x1>=qx&&(qx=x1),qy=f(qx),zeichne())}},!1),zeichne()}function resize1(){canvas1.width=W,canvas1.height=H}function OnChangeCheckbox0(e){e.checked&&(document.getElementById("x1").checked=!1,px=3,py=f(px),qx=8,qy=f(qx),zeichne())}function OnChangeCheckbox1(e){e.checked&&(document.getElementById("x0").checked=!1,px=3,py=f(px),qx=8,qy=f(qx),zeichne())}function OnChangeCheckboxl(e){e.checked&&(document.getElementById("rechts").checked=!1,px=3,py=f(px),zeichne())}function OnChangeCheckboxr(e){e.checked&&(document.getElementById("links").checked=!1,qx=8,qy=f(qx),zeichne())}function Line(e,x,t,n){ctx.beginPath(),ctx.moveTo(map(0,e),map(1,x)),ctx.lineWidth="1",ctx.lineTo(map(0,t),map(1,n)),ctx.stroke()}function map(e,x){return s=2,.5>e&&(s=(x-xmin)/(xmax-xmin)*W),e>.5&&(s=(ymax-x)/(ymax-ymin)*H),s}function invmap(e,x){return ss=2,.5>e&&(ss=xmin+x*(xmax-xmin)/W),e>.5&&(ss=-x*(ymax-ymin)/H-ymin),ss}function koordsys(){var e=map(1,0);Line(xmin,0,xmax,0),Line(1,-.03,1,.03),ctx.strokeText("1",map(0,1)-4,map(1,0)+12),ctx.beginPath(),ctx.moveTo(W-5,e-5),ctx.lineTo(W,e),ctx.moveTo(W-5,e+5),ctx.lineTo(W,e),ctx.stroke();var x=map(0,0);Line(0,ymin,0,ymax),Line(-.03,1,.03,1),ctx.strokeText("1",map(0,0)-12,map(1,1)),ctx.beginPath(),ctx.moveTo(x-5,5),ctx.lineTo(x,0),ctx.moveTo(x+5,5),ctx.lineTo(x,0),ctx.stroke()}function zeichne(){var e=1;for(document.getElementById("rechts").checked&&(e=2),ctx.clearRect(0,0,W,H),ctx.beginPath(),ctx.strokeStyle="black",ctx.lineWidth="1",koordsys(),i=0;deltax>=i;i++){var x;x=0==i?i/deltax*(x0-xmin)+xmin:(i-1)/deltax*(x0-xmin)+xmin;var t=i/deltax*(x0-xmin)+xmin,n=f(x),c=f(t);Line(x,n,t,c)}for(i=0;deltax>=i;i++)x=0==i?i/deltax*(xmax-x0)+x0:(i-1)/deltax*(xmax-x0)+x0,t=i/deltax*(xmax-x0)+x0,n=f(x),c=f(t),Line(x,n,t,c);if(document.getElementById("x0").checked){var a=Math.round(1e3*(f(x0)-py)/(x0-px))/1e3;Math.abs(px-x0)>=.01&&1==e&&(ctx.strokeStyle="red",Zeichne(px,py,x0,f(x0)),x0-px>=.01&&(lsteig.innerHTML=a)),Math.abs(px-x0)<.01&&1==e&&(ctx.strokeStyle="blue",Line(xmin,ldf(xmin),xmax,ldf(xmax)),ctx.font="16px sans-serif",ctx.fillText("Linksseitige Ableitung",40,20),lsteig.innerHTML=2*x0/5),a=Math.round(1e3*(f(x0)-qy)/(x0-qx))/1e3,Math.abs(qx-x0)>=.01&&2==e&&(ctx.strokeStyle="red",Zeichne(qx,qy,x0,f(x0)),qx-x0>=.01&&(rsteig.innerHTML=a)),Math.abs(qx-x0)<.01&&2==e&&(ctx.strokeStyle="blue",Line(xmin,rdf(xmin),xmax,rdf(xmax)),ctx.font="16px sans-serif",ctx.fillText("Rechtsseitige Ableitung",40,20),rsteig.innerHTML=0),ctx.strokeStyle="gray",Line(x0,f(x0),x0,0),ctx.strokeStyle="black",ctx.font="12px sans-serif",ctx.strokeText("x0",map(0,x0)-2,map(1,0)+12)}if(document.getElementById("x1").checked){var a=Math.round(1e3*(f(x1)-py)/(x1-px))/1e3;Math.abs(px-x1)>=.01&&1==e&&(ctx.strokeStyle="red",Zeichne(px,py,x1,f(x1)),x1-px>=.01&&(lsteig.innerHTML=a)),Math.abs(px-x1)<.01&&1==e&&(ctx.strokeStyle="blue",Line(xmin,df(xmin),xmax,df(xmax)),ctx.font="16px sans-serif",ctx.fillText("Linksseitige Ableitung",40,20),lsteig.innerHTML=-2*(x1-x0)/5),a=Math.round(1e3*(f(x1)-qy)/(x1-qx))/1e3,Math.abs(qx-x1)>=.01&&2==e&&(ctx.strokeStyle="red",Zeichne(qx,qy,x1,f(x1)),qx-x0>=.01&&(rsteig.innerHTML=a)),Math.abs(qx-x1)<.01&&2==e&&(ctx.strokeStyle="blue",Line(xmin,df(xmin),xmax,df(xmax)),ctx.font="16px sans-serif",ctx.fillText("Rechtsseitige Ableitung",40,20),rsteig.innerHTML=-2*(x1-x0)/5),ctx.strokeStyle="gray",Line(x1,f(x1),x1,0),ctx.strokeStyle="black",ctx.font="12px sans-serif",ctx.strokeText("x1",map(0,x1),map(1,0)+12)}ctx.strokeStyle="gray",1==e&&Line(px,py,px,0),2==e&&Line(qx,qy,qx,0),1==e&&(ctx.beginPath(),ctx.strokeStyle="red",ctx.arc(map(0,px),map(1,py),2,0,2*Math.PI),ctx.fillStyle="red",ctx.fill(),ctx.stroke()),2==e&&(ctx.beginPath(),ctx.strokeStyle="red",ctx.arc(map(0,qx),map(1,qy),2,0,2*Math.PI),ctx.fillStyle="red",ctx.fill(),ctx.stroke()),document.getElementById("x0").checked&&(ctx.beginPath(),ctx.strokeStyle="blue",ctx.arc(map(0,x0),map(1,f(x0)),2,0,2*Math.PI),ctx.fillStyle="blue",ctx.fill(),ctx.stroke()),document.getElementById("x1").checked&&(ctx.beginPath(),ctx.strokeStyle="blue",ctx.arc(map(0,x1),map(1,f(x1)),2,0,2*Math.PI),ctx.fillStyle="blue",ctx.fill(),ctx.stroke()),ctx.strokeStyle="black",ctx.font="12px sans-serif",1==e&&ctx.strokeText("x",map(0,px)-2,map(1,0)+12),2==e&&ctx.strokeText("x",map(0,qx)-2,map(1,0)+12),ctx.stroke()}function dostep(){document.getElementById("x0").checked&&(document.getElementById("links").checked&&x0>px&&(px+=.1,px>x0&&(px=x0),py=f(px),zeichne()),document.getElementById("rechts").checked&&qx>x0&&(qx-=.1,x0>qx&&(qx=x0),qy=f(qx),zeichne())),document.getElementById("x1").checked&&(document.getElementById("links").checked&&x1>px&&(px+=.1,px>x1&&(px=x1),py=f(px),zeichne()),document.getElementById("rechts").checked&&qx>x1&&(qx-=.1,x1>qx&&(qx=x1),qy=f(qx),zeichne()))}function Zeichne(e,x,t,n){if(Math.abs(e-t)<.01&&Line(e,ymin,e,ymax),Math.abs(e-t)>=.01){var c=(n-x)/(t-e),i=xmin,a=c*(xmin-e)+x,s=xmax,m=c*(xmax-e)+x;Line(i,a,s,m)}}function getMousePos(e,x){var t=e.getBoundingClientRect();return{x:x.clientX-t.left,y:x.clientY-t.top}}function f(e){return s=0,x0>e&&(s=e*e/5+.5),e>=x0&&(s=-(e-x0)*(e-x0)/5+x0*x0/5+.5),s}function df(e){return s=0,x0>x1&&(s=f(x1)+2*x1/5*(e-x1)),x1>=x0&&(s=-2*(x1-x0)/5*(e-x1)+f(x1)),s}function ldf(e){return s=0,s=f(x0)+2*x0/5*(e-x0)}function rdf(){return s=0,s=f(x0)}var W,H;deltax=40,xmax=9,xmin=-1,ymax=8,ymin=-1,x0=5.5,x1=6;var canvas1,ctx,px=3,qx=8,py,qy,mousedown=!1,initmade=!1;window.onload=resizeCanvas;