var W,H;var xm,ym;var a,b,k;var L;var Farbzahl;var canvas1;var ctx;var initmade=false;var timer;delay=900;var Weiter=false;var stop;window.onload=resizeCanvas;function resizeCanvas(){var c=document.getElementById("containercanvas");c.width=c.offsetWidth;W=c.width;if(W>400){W=400}H=Math.round(0.9*W);xm=W/2;ym=H/2;if(initmade){resize1();zeichne()}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(c){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");benutzer()}function resize1(){canvas1.width=W;canvas1.height=H}function run(){Weiter=!Weiter;if(Weiter){document.getElementById("STEP").disabled=true;document.getElementById("USER").disabled=true;document.getElementById("USER1").disabled=true}else{document.getElementById("STEP").disabled=false;document.getElementById("USER").disabled=false;document.getElementById("USER1").disabled=false}stop=false;dorun()}function dorun(){if(!stop&&Weiter){dostep()}}function dostep(){stop=true;timer=setTimeout(function(){action()},delay);zufallsfigur();dorun()}function action(){stop=false;clearTimeout(timer);dorun()}function bestimmeFarbzahl(){Farbzahl=Math.floor(4*Math.random())}function zufallsfigur(){a=Math.floor(10*Math.random())+1;b=Math.floor(10*Math.random())+1;k=Math.floor(359*Math.random())+1;setzeWerte();bestimmeL();bestimmeFarbzahl();zeichne()}function benutzer(){a=Math.floor(document.getElementById("a").value);if(a<1){a=1}if(a>10){a=10}b=Math.floor(document.getElementById("b").value);if(b<1){b=1}if(b>10){b=10}k=Math.floor(document.getElementById("k").value);if(k<1){k=1}if(k>359){k=359}setzeWerte();bestimmeL();bestimmeFarbzahl();zeichne()}function benutzer1(){k=1;setzeWerte();bestimmeL();zeichne()}function zeichne(){ctx.clearRect(0,0,W,H);ctx.beginPath();if(Farbzahl==0){ctx.strokeStyle="red"}if(Farbzahl==1){ctx.strokeStyle="green"}if(Farbzahl==2){ctx.strokeStyle="blue"}if(Farbzahl==3){ctx.strokeStyle="yellow"}ctx.lineWidth="1";var e=(k/180)*Math.PI;var d=xm-Math.round((xm-1)*Math.cos(a*e));var h=ym+Math.round((ym-1)*Math.sin(b*e));ctx.moveTo(d,h);for(var g=2;g<L+2;g++){e=(k/180)*g*Math.PI;var c=xm-Math.round((xm-1)*Math.cos(a*e));var f=ym+Math.round((ym-1)*Math.sin(b*e));ctx.lineTo(c,f);d=c;h=f}ctx.stroke()}function bestimmeL(){var c=k*ggT(a,b);c=ggT(c,360);L=360/c}function ggT(e,d){var f=1.5;while(f>Math.floor(f)){f=e/d;var g=e-Math.floor(f)*d;e=d;d=g}return e}function setzeWerte(){document.getElementById("a").value=a;document.getElementById("b").value=b;document.getElementById("k").value=k;document.getElementById("A").innerHTML=a;document.getElementById("B").innerHTML=b;document.getElementById("K").innerHTML=k}function Figur(c,d,e){a=c;b=d;k=e;setzeWerte();bestimmeL();zeichne()};