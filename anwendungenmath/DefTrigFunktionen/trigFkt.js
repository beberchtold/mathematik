var W,H;var Verschiebung;var Ursprungx;var Ursprungy;var deltax;xmax=6.3;xmin=0;ymax=2.5;ymin=-ymax;var mx;var my;var r;var x0,y0;var mode=1;var Winkel=Math.PI/4;var canvas1;var ctx;var mousedown=false;var initmade=false;window.onload=resizeCanvas;function resizeCanvas(){var a=document.getElementById("containercanvas");a.width=a.offsetWidth;W=a.width;if(W>500){W=500}H=0.6*W;Verschiebung=0.26*W;Ursprungx=Verschiebung;Ursprungy=H/2;mx=Verschiebung/2;my=H/2;r=map(0,1)-Ursprungx;deltax=0.08*W;if(initmade){resize1();zeichne()}else{init()}}function init(){initmade=true;window.addEventListener("resize",function(a){resizeCanvas()});canvas1=document.getElementById("myCanvas");resize1();ctx=canvas1.getContext("2d");document.getElementById("Sinus").checked=true;canvas1.addEventListener("mousedown",function(a){mousedown=true},false);canvas1.addEventListener("mouseup",function(a){mousedown=false},false);canvas1.addEventListener("mousemove",function(c){if(mousedown){var b=getMousePos(canvas1,c);var a=b.x;if((a>=mx-r)&&(a<=mx+r)){a=a-mx;var d=my-b.y;if(a!=0){Winkel=Math.abs(Math.atan(d/a))}if((a==0)&&(d>0)){Winkel=Math.PI/2}if((a==0)&&(d<0)){Winkel=3*Math.PI/2}if((a<0)&&(d>0)){Winkel=Math.PI-Winkel}if((a<0)&&(d<0)){Winkel=Math.PI+Winkel}if((a>0)&&(d<0)){Winkel=2*Math.PI-Winkel}zeichne()}}},false);zeichne()}function resize1(){canvas1.width=W;canvas1.height=H}function OnChangeradio1(a){if(a.checked){mode=1;Winkel=Math.PI/4;zeichne()}}function OnChangeradio2(a){if(a.checked){mode=2;Winkel=Math.PI/4;zeichne()}}function OnChangeradio3(a){if(a.checked){mode=3;Winkel=Math.PI/4;zeichne()}}function Line(b,d,a,c){ctx.beginPath();ctx.moveTo(map(0,b),map(1,d));ctx.lineWidth="1";ctx.lineTo(map(0,a),map(1,c));ctx.stroke()}function map(a,b){s=2;if(a<0.5){s=(b-xmin)/(xmax-xmin)*(W-Verschiebung)+Verschiebung}if(a>0.5){s=(ymax-b)/(ymax-ymin)*H}return s}function invmap(a,b){ss=2;if(a<0.5){ss=xmin+((b-Verschiebung)*(xmax-xmin))/(W-Verschiebung)}if(a>0.5){ss=(-b*(ymax-ymin))/H-ymin}return ss}function beschriftung(){ctx.strokeStyle="black";Line(-4,0,xmax,0);Line(xmax-0.1,-0.1,xmax,0);Line(xmax-0.1,0.1,xmax,0);Line(1,-0.02,1,0.02);ctx.strokeText("1",map(0,1)-4,map(1,0)+12);Line(Math.PI/2,-0.02,Math.PI/2,0.02);ctx.strokeText(String.fromCharCode(960)+"/2",map(0,Math.PI/2)-6,map(1,0)+12);Line(Math.PI,-0.02,Math.PI,0.02);ctx.strokeText(String.fromCharCode(960),map(0,Math.PI)-4,map(1,0)+12);Line(3*Math.PI/2,-0.02,3*Math.PI/2,0.02);ctx.strokeText("3"+String.fromCharCode(960)+"/2",map(0,3*Math.PI/2)-8,map(1,0)+12);Line(0,ymin,0,ymax);Line(-0.1,ymax-0.1,0,ymax);Line(0.1,ymax-0.1,0,ymax);Line(-0.02,1,0.02,1);ctx.strokeText("1",map(0,0)-8,map(1,1)+4)}function zeichne(){ctx.clearRect(0,0,W,H);ctx.beginPath();ctx.strokeStyle="black";ctx.lineWidth="1";beschriftung();ctx.stroke();ctx.beginPath();ctx.arc(mx,my,r,0,2*Math.PI);ctx.stroke();ctx.beginPath();for(var d=0;d<=300;d++){var a;if(d==0){a=xmin}else{a=((d-1)/deltax)+xmin}var b=(d/deltax)+xmin;var e=f(a);var c=f(b);if(Math.abs(c-e)<1){Line(a,e,b,c)}}y0=f(Winkel);phi.innerHTML=Math.round(18000*Winkel/Math.PI)/100;if((mode==3)&&(Math.abs(y0)>10000)){res.innerHTML="nicht definiert"}else{res.innerHTML=Math.round(1000*y0)/1000}x0=invmap(0,mx)+Math.cos(Winkel);Line(invmap(0,mx),0,x0,Math.sin(Winkel));if(mode==2){Line(x0,0,x0,Math.sin(Winkel))}if(mode==3){Line(invmap(0,mx),0,invmap(0,mx+r),y0)}ctx.strokeStyle="red";Line(0,0,Winkel,0);ctx.stroke();ctx.beginPath();ctx.arc(mx,my,r,2*Math.PI-Winkel,2*Math.PI);ctx.stroke();ctx.beginPath();ctx.strokeStyle="blue";if(mode==1){Line(x0,0,x0,y0)}if(mode==2){Line(invmap(0,mx),0,x0,0)}if((mode==3)&&(Math.abs(y0)<10000)){Line(invmap(0,mx+r),0,invmap(0,mx+r),y0)}if(Math.abs(y0)<10000){Line(Winkel,0,Winkel,y0)}ctx.stroke()}function f(a){var b;if(mode==1){b=Math.sin(a)}if(mode==2){b=Math.cos(a)}if(mode==3){b=Math.tan(a)}return b}function dostep(){Winkel=Winkel+Math.PI*5/180;if(Winkel>2*Math.PI){Winkel=Winkel-2*Math.PI}zeichne()}function getMousePos(b,a){var c=b.getBoundingClientRect();return{x:a.clientX-c.left,y:a.clientY-c.top}};