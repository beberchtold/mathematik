RewriteEngine On
 RewriteCond %{HTTP_HOST} !^www\.mathematik\.ch [NC]
 RewriteRule ^(.*) https://www\.mathematik\.ch/$1 [R=301,L]
 
 RewriteRule ^(.*)\.php$ https://%{HTTP_HOST}/$1.html [R=301,L]

AddCharset UTF-8 .html
AddCharset UTF-8 .js

ErrorDocument 404 /404.html
Options -Indexes

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^https://www\.mathematik\.ch.*$ [NC]
RewriteCond %{HTTP_REFERER} !^https://www\.google\..*$ [NC]
RewriteCond %{HTTP_REFERER} !^https://www\.bing\..*$ [NC]
RewriteCond %{REQUEST_URI} !^.*hotlink\.png$ [NC]
RewriteRule ^(.*)\.(gif|jpg|png|jpeg)$ https://www.mathematik.ch/img/hotlink.png [NC,R,L]
</IfModule>

<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType text/css "access plus 1 week"
ExpiresByType text/javascript "access plus 1 week"
ExpiresByType application/javascript "access plus 1 month"
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/x-icon "access plus 1 year"
</IfModule>

<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE text/javascript
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE image/png
AddOutputFilterByType DEFLATE image/gif
AddOutputFilterByType DEFLATE image/jpeg
</IfModule>